(self["webpackChunkvarun_website_updated"]=self["webpackChunkvarun_website_updated"]||[]).push([[441],{6373:function(e,t,n){var r={".":9743,"./":9743,"./arquero":2384,"./arquero.js":2384,"./arrow":9886,"./arrow.js":9886,"./dependencies":1114,"./dependencies.js":1114,"./dependency":5542,"./dependency.js":5542,"./dom":1880,"./dom/":1880,"./dom/canvas":690,"./dom/canvas.js":690,"./dom/context2d":1421,"./dom/context2d.js":1421,"./dom/download":3490,"./dom/download.js":3490,"./dom/element":8268,"./dom/element.js":8268,"./dom/index":1880,"./dom/index.js":1880,"./dom/input":5304,"./dom/input.js":5304,"./dom/range":2365,"./dom/range.js":2365,"./dom/select":3366,"./dom/select.js":3366,"./dom/svg":6925,"./dom/svg.js":6925,"./dom/text":553,"./dom/text.js":553,"./dom/uid":9870,"./dom/uid.js":9870,"./duckdb":1656,"./duckdb.js":1656,"./fileAttachment":7796,"./fileAttachment.js":7796,"./files":6559,"./files/":6559,"./files/buffer":6425,"./files/buffer.js":6425,"./files/index":6559,"./files/index.js":6559,"./files/text":2864,"./files/text.js":2864,"./files/url":2166,"./files/url.js":2166,"./generators":6434,"./generators/":6434,"./generators/disposable":3938,"./generators/disposable.js":3938,"./generators/filter":7134,"./generators/filter.js":7134,"./generators/index":6434,"./generators/index.js":6434,"./generators/input":5818,"./generators/input.js":5818,"./generators/map":7240,"./generators/map.js":7240,"./generators/observe":5086,"./generators/observe.js":5086,"./generators/queue":4605,"./generators/queue.js":4605,"./generators/range":5767,"./generators/range.js":5767,"./generators/valueAt":9478,"./generators/valueAt.js":9478,"./generators/worker":9834,"./generators/worker.js":9834,"./html":114,"./html.js":114,"./index":9743,"./index.js":9743,"./leaflet":1282,"./leaflet.js":1282,"./library":4284,"./library.js":4284,"./md":4606,"./md.js":4606,"./mermaid":4444,"./mermaid.js":4444,"./mutable":3065,"./mutable.js":3065,"./now":3523,"./now.js":3523,"./promises":8350,"./promises/":8350,"./promises/delay":7057,"./promises/delay.js":7057,"./promises/index":8350,"./promises/index.js":8350,"./promises/tick":4537,"./promises/tick.js":4537,"./promises/when":2776,"./promises/when.js":2776,"./require":8064,"./require.js":8064,"./resolve":4911,"./resolve.js":4911,"./sqlite":4687,"./sqlite.js":4687,"./svg":693,"./svg.js":693,"./table":5729,"./table.js":5729,"./template":505,"./template.js":505,"./tex":4753,"./tex.js":4753,"./that":7374,"./that.js":7374,"./vegalite":3886,"./vegalite.js":3886,"./width":8575,"./width.js":8575,"./xlsx":7816,"./xlsx.js":7816};function a(e){return Promise.resolve().then((function(){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}var a=r[e];return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=6373,e.exports=a},3796:function(e,t,n){"use strict";n.d(t,{A:function(){return u}});var r=n(6768);const a={class:"section"};function i(e,t,n,i,o,s){return(0,r.uX)(),(0,r.CE)("div",a,[(0,r.RG)(e.$slots,"default",{},void 0,!0)])}var o={name:"SectionContainer"},s=n(1241);const l=(0,s.A)(o,[["render",i],["__scopeId","data-v-6f8215aa"]]);var u=l},7469:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return co}});var r=n(6768),a=n.p+"img/initial_correlation.6516878e.png";const i={class:"container"},o={ref:"viewofYear_range"},s={ref:"viewofEmotion_score"},l={id:"first",ref:"first_plot"},u={class:"graph_object"},c={ref:"viewofYear_steps"},d={ref:"viewofParticipant_dropdown"},f={id:"third",ref:"final_chart"},p={ref:"viewofYear_drop_down"},m={ref:"student_phone"};function h(e,t,n,h,b,v){const g=(0,r.g2)("sectionContainer");return(0,r.uX)(),(0,r.CE)("div",i,[(0,r.bF)(g,{class:"light"},{default:(0,r.k6)((()=>t[0]||(t[0]=[(0,r.Lk)("h1",null,"Analysing Longitudinal Human Behavior",-1),(0,r.Lk)("h3",{style:{"text-align":"center"}}," Visualizing Wellness: Understanding student mental health through Longitudinal data analysis ",-1),(0,r.Lk)("div",{class:"main_img"},null,-1),(0,r.Lk)("h2",null," Team",-1),(0,r.Lk)("p",null,[(0,r.eW)("Mars Gao, Soham Gadgil, "),(0,r.Lk)("b",null,"Varun Narayanswamy")],-1),(0,r.Lk)("h2",null,"Timeline",-1),(0,r.Lk)("p",null,"March 2024 - June 2024",-1)]))),_:1}),(0,r.bF)(g,{class:"dark",style:{"text-align":"left"}},{default:(0,r.k6)((()=>t[1]||(t[1]=[(0,r.Lk)("h1",null,"The Situation",-1),(0,r.Lk)("p",null,[(0,r.eW)(" In today's world where college students have to juggle multiple responsibilities, mental health and wellness is something that is often overlooked. For this project, we have used the "),(0,r.Lk)("a",{href:"https://physionet.org/content/globem/1.1/INS-W_1/#files-panel"},"GLOBEM dataset"),(0,r.eW)(".")],-1),(0,r.Lk)("h2",null,"The GLOBEM Dataset",-1),(0,r.Lk)("p",null," The GLOBEM dataset is a mult-year dataset for logitudinal human behavior, collected from the daily activities of around 705 diverse UW students.",-1),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.Lk)("p",null,"The data collection spans three years (~14 weeks each year, March to June, from 2019 to 2021)")]),(0,r.Lk)("li",null,[(0,r.Lk)("p",null,"It contains a variety of different sensor, phone usage, and sleep data for analysing student behavior. ")]),(0,r.Lk)("li",null,[(0,r.Lk)("p",null,"Each of the attributes are collected during different phases of the day: morning, afternoon, evening, and night.")])],-1)]))),_:1}),(0,r.bF)(g,{class:"light"},{default:(0,r.k6)((()=>t[2]||(t[2]=[(0,r.Lk)("h2",null,"Mental Health Data",-1),(0,r.Lk)("p",null,"The GLOBEM dataset provides an insight into the mental health of the students through quantitative depression and anxiety scores.",-1),(0,r.Lk)("p",null,"To measure mental health, we use two different metrics:",-1),(0,r.Lk)("ul",null,[(0,r.Lk)("li",null,[(0,r.Lk)("p",null,"PHQ-4 (Patient Health Questionnaire 4), which is a 4-item scale assessing both anxiety and depression, with higher values indicating higher risk. The PHQ-4 scores range from 0 to 6.")]),(0,r.Lk)("li",null,[(0,r.Lk)("p",null,"PANAS (Positive and Negative Affect Schedule), which is a 10-item scale measuring the level of positive and negative affects separately. Higher values indicateds larger extent for each of them. The PANAS scores range from 0 to 20. ")])],-1)]))),_:1}),(0,r.bF)(g,{class:"dark"},{default:(0,r.k6)((()=>t[3]||(t[3]=[(0,r.Lk)("h1",null,"Data Filling",-1),(0,r.Lk)("p",null,"After gaining access to the dataset the team began analysing we had a number of issues to determine ",-1),(0,r.Lk)("div",{class:"issue_1"},[(0,r.Lk)("h3",null,"Messy Data"),(0,r.Lk)("p",null,"We struggled with data metrics that made no sense, potentially collected incorrectly with poor device collection or more"),(0,r.Lk)("h3",null,"Missing Data"),(0,r.Lk)("p",null,"Many of the student data entries were empty, with students missing entries of devices failing to collect. Due to this, we were forced to look at data trends, and when possible fill in the empty data based on existing trends"),(0,r.Lk)("h3",null,"Students Variation"),(0,r.Lk)("p",null,"Even with more data, each and every student is highly different. Looking at averages, and approaches was many times unhelpful, forcing us to consider the individuals.")],-1),(0,r.Lk)("p",null,"Our approach to making design was to build many different visualizations, constantly using them to analyze for potential patterns and answers",-1)]))),_:1}),(0,r.bF)(g,{class:"light"},{default:(0,r.k6)((()=>[t[4]||(t[4]=(0,r.Lk)("h2",null,"Changes in mental health over weeks",-1)),t[5]||(t[5]=(0,r.Lk)("br",null,null,-1)),t[6]||(t[6]=(0,r.Lk)("p",null," First, we observe how student mental health changes over the weeks. Hovering over a line reveals the trend for that student for a given year and a given mental health metric. There are many interesting patterns observable, with some students' mental health deterioriating over the quarter, possibly due to increased workload, while improving for other students.",-1)),(0,r.Lk)("div",o,null,512),(0,r.Lk)("div",s,null,512),(0,r.Lk)("div",l,null,512)])),_:1}),(0,r.bF)(g,{class:"dark"},{default:(0,r.k6)((()=>t[7]||(t[7]=[(0,r.Lk)("h3",null,"Analysing global trends",-1),(0,r.Lk)("p",null,[(0,r.eW)("Next, to understand global behavior, we combine the data for all the years and create a heatmap to show the correlation between any two attributes. Each attribute is further subdivided into the time of day and the naming convention followed is {attribute_name}.{time_of_day}. "),(0,r.Lk)("strong",null,"Sleep"),(0,r.eW)(" refers to the total minutes of sleep, "),(0,r.Lk)("strong",null,"Screen"),(0,r.eW)(" refers to the total time the phone screen was turned on, "),(0,r.Lk)("strong",null,"Episodes"),(0,r.eW)(" refers to the number of unlock episodes of the phone, "),(0,r.Lk)("strong",null,"Steps"),(0,r.eW)(" refers to the number of steps taken, and "),(0,r.Lk)("strong",null,"Loc"),(0,r.eW)(" refers to the locational area covered by the student in meters. The matrix is re-orderable, and any attribute can be selected and dragged to make it easier to analyse. This allowed us to identify any potential attributes which could be correlated with mental health. "),(0,r.Lk)("br"),(0,r.Lk)("br"),(0,r.eW)(" Focusing on the the mental health metrics, anxiety and depression seem to be highly correlated with each other, which is perhaps unsurprising but it is still intersting since they track two different aspects of mental health. None of anxiety, depression, or PANAS negative score seem to be correlated with the daily activities that were measured which is a bit surprising. They are slightly correlated with morning sleep, albeit it is pretty weak. PANAS positive score on the other hand seems to have a correlation with the number of steps. ")],-1),(0,r.Lk)("img",{src:a,style:{width:"100%",margin:"auto",height:"auto"}},null,-1)]))),_:1}),(0,r.bF)(g,{class:"light"},{default:(0,r.k6)((()=>[t[8]||(t[8]=(0,r.Lk)("h3",null,"Diving deeper into individual student behavior",-1)),t[9]||(t[9]=(0,r.Lk)("p",null," After analysing the global trends, we found that there might be a correlation between the PANAS positive score and the number of steps. The visualization below explores into this relationship on a per-student basis. Given a year and a student id, we can observe how the number of average steps has changed over the different weeks. Selecting over the different weeks reveals how the steps and PANAS positive score are related for that student compared to the other students. 'All' can be selected to highlight all the students. An additional linear trendline allows for observing a more interpretable pattern from the scatter plot. The tooltip allows us to select interesting students and observe their trends over weeks. ",-1)),(0,r.Lk)("div",u,[(0,r.Lk)("div",c,null,512),(0,r.Lk)("div",d,null,512),(0,r.Lk)("div",f,null,512)])])),_:1}),(0,r.bF)(g,{class:"dark"},{default:(0,r.k6)((()=>[t[10]||(t[10]=(0,r.Lk)("h2",null,"Expanding Selections",-1)),t[11]||(t[11]=(0,r.Lk)("p",null,'Instead of looking at individual weeks, the visualization below allows for combining arbitrary number of weeks and students. On brushing over the dot plot to select a subset of students based on the period of time and steps, the step counts are sub-divided into different times of the day and their relationship to the PANAS positive score can be observed. In this case, both the x and y values are averaged over the selected period for each student. This allows for probing into questions like "For students who walk a lot, how does their step count at different times of the day relate to their PANAS positive score over time?"',-1)),(0,r.Lk)("div",p,null,512),(0,r.Lk)("div",m,null,512)])),_:1})])}var b=n(144);function v(e,t,n){n=n||{};var r=e.ownerDocument,a=r.defaultView.CustomEvent;"function"===typeof a?a=new a(t,{detail:n}):(a=r.createEvent("Event"),a.initEvent(t,!1,!1),a.detail=n),e.dispatchEvent(a)}n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(6573),n(8100),n(7936),n(7467),n(4732),n(9577);function g(e){return Array.isArray(e)||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}function w(e){return e===(0|e)+""}function y(e){const t=document.createElement("span");return t.className="observablehq--cellname",t.textContent=`${e} = `,t}const _=Symbol.prototype.toString;function k(e){return _.call(e)}const{getOwnPropertySymbols:x,prototype:{hasOwnProperty:A}}=Object,{toStringTag:E}=Symbol,q={},S=x;function T(e,t){return A.call(e,t)}function N(e){return e[E]||e.constructor&&e.constructor.name||"Object"}function I(e,t){try{const n=e[t];return n&&n.constructor,n}catch(n){return q}}const L=[{symbol:"@@__IMMUTABLE_INDEXED__@@",name:"Indexed",modifier:!0},{symbol:"@@__IMMUTABLE_KEYED__@@",name:"Keyed",modifier:!0},{symbol:"@@__IMMUTABLE_LIST__@@",name:"List",arrayish:!0},{symbol:"@@__IMMUTABLE_MAP__@@",name:"Map"},{symbol:"@@__IMMUTABLE_ORDERED__@@",name:"Ordered",modifier:!0,prefix:!0},{symbol:"@@__IMMUTABLE_RECORD__@@",name:"Record"},{symbol:"@@__IMMUTABLE_SET__@@",name:"Set",arrayish:!0,setish:!0},{symbol:"@@__IMMUTABLE_STACK__@@",name:"Stack",arrayish:!0}];function C(e){try{let t=L.filter((({symbol:t})=>!0===e[t]));if(!t.length)return;const n=t.find((e=>!e.modifier)),r="Map"===n.name&&t.find((e=>e.modifier&&e.prefix)),a=t.some((e=>e.arrayish)),i=t.some((e=>e.setish));return{name:`${r?r.name:""}${n.name}`,symbols:t,arrayish:a&&!i,setish:i}}catch(t){return null}}const{getPrototypeOf:j,getOwnPropertyDescriptors:P}=Object,M=j({});function R(e,t,n,r){let a,i,o,s,l=g(e);e instanceof Map?e instanceof e.constructor?(a=`Map(${e.size})`,i=D):(a="Map()",i=U):e instanceof Set?e instanceof e.constructor?(a=`Set(${e.size})`,i=$):(a="Set()",i=U):l?(a=`${e.constructor.name}(${e.length})`,i=F):(s=C(e))?(a=`Immutable.${s.name}${"Record"===s.name?"":`(${e.size})`}`,l=s.arrayish,i=s.arrayish?B:s.setish?O:z):r?(a=N(e),i=V):(a=N(e),i=U);const u=document.createElement("span");u.className="observablehq--expanded",n&&u.appendChild(y(n));const c=u.appendChild(document.createElement("a"));c.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M4 7L0 1h8z' fill='currentColor' />\n  </svg>",c.appendChild(document.createTextNode(`${a}${l?" [":" {"}`)),c.addEventListener("mouseup",(function(t){t.stopPropagation(),Ie(u,J(e,null,n,r))})),i=i(e);for(let d=0;!(o=i.next()).done&&d<20;++d)u.appendChild(o.value);if(!o.done){const e=u.appendChild(document.createElement("a"));e.className="observablehq--field",e.style.display="block",e.appendChild(document.createTextNode("  … more")),e.addEventListener("mouseup",(function(e){e.stopPropagation(),u.insertBefore(o.value,u.lastChild.previousSibling);for(let t=0;!(o=i.next()).done&&t<19;++t)u.insertBefore(o.value,u.lastChild.previousSibling);o.done&&u.removeChild(u.lastChild.previousSibling),v(u,"load")}))}return u.appendChild(document.createTextNode(l?"]":"}")),u}function*D(e){for(const[t,n]of e)yield G(t,n);yield*U(e)}function*$(e){for(const t of e)yield H(t);yield*U(e)}function*O(e){for(const t of e)yield H(t)}function*F(e){for(let t=0,n=e.length;t<n;++t)t in e&&(yield W(t,I(e,t),"observablehq--index"));for(const t in e)!w(t)&&T(e,t)&&(yield W(t,I(e,t),"observablehq--key"));for(const t of S(e))yield W(k(t),I(e,t),"observablehq--symbol")}function*B(e){let t=0;for(const n=e.size;t<n;++t)yield W(t,e.get(t),!0)}function*V(e){for(const n in P(e))yield W(n,I(e,n),"observablehq--key");for(const n of S(e))yield W(k(n),I(e,n),"observablehq--symbol");const t=j(e);t&&t!==M&&(yield Q(t))}function*U(e){for(const n in e)T(e,n)&&(yield W(n,I(e,n),"observablehq--key"));for(const n of S(e))yield W(k(n),I(e,n),"observablehq--symbol");const t=j(e);t&&t!==M&&(yield Q(t))}function*z(e){for(const[t,n]of e)yield W(t,n,"observablehq--key")}function Q(e){const t=document.createElement("div"),n=t.appendChild(document.createElement("span"));return t.className="observablehq--field",n.className="observablehq--prototype-key",n.textContent="  <prototype>",t.appendChild(document.createTextNode(": ")),t.appendChild(Ne(e,void 0,void 0,void 0,!0)),t}function W(e,t,n){const r=document.createElement("div"),a=r.appendChild(document.createElement("span"));return r.className="observablehq--field",a.className=n,a.textContent=`  ${e}`,r.appendChild(document.createTextNode(": ")),r.appendChild(Ne(t)),r}function G(e,t){const n=document.createElement("div");return n.className="observablehq--field",n.appendChild(document.createTextNode("  ")),n.appendChild(Ne(e)),n.appendChild(document.createTextNode(" => ")),n.appendChild(Ne(t)),n}function H(e){const t=document.createElement("div");return t.className="observablehq--field",t.appendChild(document.createTextNode("  ")),t.appendChild(Ne(e)),t}function Y(e){const t=window.getSelection();return"Range"===t.type&&(t.containsNode(e,!0)||e.contains(t.anchorNode)||e.contains(t.focusNode))}function J(e,t,n,r){let a,i,o,s,l=g(e);if(e instanceof Map?e instanceof e.constructor?(a=`Map(${e.size})`,i=K):(a="Map()",i=ne):e instanceof Set?e instanceof e.constructor?(a=`Set(${e.size})`,i=Z):(a="Set()",i=ne):l?(a=`${e.constructor.name}(${e.length})`,i=te):(s=C(e))?(a=`Immutable.${s.name}${"Record"===s.name?"":`(${e.size})`}`,l=s.arrayish,i=s.arrayish?ee:s.setish?X:re):(a=N(e),i=ne),t){const t=document.createElement("span");return t.className="observablehq--shallow",n&&t.appendChild(y(n)),t.appendChild(document.createTextNode(a)),t.addEventListener("mouseup",(function(n){Y(t)||(n.stopPropagation(),Ie(t,J(e)))})),t}const u=document.createElement("span");u.className="observablehq--collapsed",n&&u.appendChild(y(n));const c=u.appendChild(document.createElement("a"));c.innerHTML="<svg width=8 height=8 class='observablehq--caret'>\n    <path d='M7 4L1 8V0z' fill='currentColor' />\n  </svg>",c.appendChild(document.createTextNode(`${a}${l?" [":" {"}`)),u.addEventListener("mouseup",(function(t){Y(u)||(t.stopPropagation(),Ie(u,R(e,null,n,r)))}),!0),i=i(e);for(let d=0;!(o=i.next()).done&&d<20;++d)d>0&&u.appendChild(document.createTextNode(", ")),u.appendChild(o.value);return o.done||u.appendChild(document.createTextNode(", …")),u.appendChild(document.createTextNode(l?"]":"}")),u}function*K(e){for(const[t,n]of e)yield oe(t,n);yield*ne(e)}function*Z(e){for(const t of e)yield Ne(t,!0);yield*ne(e)}function*X(e){for(const t of e)yield Ne(t,!0)}function*ee(e){let t=-1,n=0;for(const r=e.size;n<r;++n)n>t+1&&(yield ae(n-t-1)),yield Ne(e.get(n),!0),t=n;n>t+1&&(yield ae(n-t-1))}function*te(e){let t=-1,n=0;for(const r=e.length;n<r;++n)n in e&&(n>t+1&&(yield ae(n-t-1)),yield Ne(I(e,n),!0),t=n);n>t+1&&(yield ae(n-t-1));for(const r in e)!w(r)&&T(e,r)&&(yield ie(r,I(e,r),"observablehq--key"));for(const r of S(e))yield ie(k(r),I(e,r),"observablehq--symbol")}function*ne(e){for(const t in e)T(e,t)&&(yield ie(t,I(e,t),"observablehq--key"));for(const t of S(e))yield ie(k(t),I(e,t),"observablehq--symbol")}function*re(e){for(const[t,n]of e)yield ie(t,n,"observablehq--key")}function ae(e){const t=document.createElement("span");return t.className="observablehq--empty",t.textContent=1===e?"empty":`empty × ${e}`,t}function ie(e,t,n){const r=document.createDocumentFragment(),a=r.appendChild(document.createElement("span"));return a.className=n,a.textContent=e,r.appendChild(document.createTextNode(": ")),r.appendChild(Ne(t,!0)),r}function oe(e,t){const n=document.createDocumentFragment();return n.appendChild(Ne(e,!0)),n.appendChild(document.createTextNode(" => ")),n.appendChild(Ne(t,!0)),n}function se(e,t){if(e instanceof Date||(e=new Date(+e)),isNaN(e))return"function"===typeof t?t(e):t;const n=e.getUTCHours(),r=e.getUTCMinutes(),a=e.getUTCSeconds(),i=e.getUTCMilliseconds();return`${le(e.getUTCFullYear(),4)}-${ue(e.getUTCMonth()+1,2)}-${ue(e.getUTCDate(),2)}${n||r||a||i?`T${ue(n,2)}:${ue(r,2)}${a||i?`:${ue(a,2)}${i?`.${ue(i,3)}`:""}`:""}Z`:""}`}function le(e){return e<0?`-${ue(-e,6)}`:e>9999?`+${ue(e,6)}`:ue(e,4)}function ue(e,t){return`${e}`.padStart(t,"0")}function ce(e){return se(e,"Invalid Date")}var de=Error.prototype.toString;function fe(e){return e.stack||de.call(e)}var pe=RegExp.prototype.toString;function me(e){return pe.call(e)}const he=20;function be(e,t,n,r){if(!1===t){if(we(e,/["\n]/g)<=we(e,/`|\${/g)){const t=document.createElement("span");r&&t.appendChild(y(r));const n=t.appendChild(document.createElement("span"));return n.className="observablehq--string",n.textContent=JSON.stringify(e),t}const a=e.split("\n");if(a.length>he&&!n){const n=document.createElement("div");r&&n.appendChild(y(r));const i=n.appendChild(document.createElement("span"));i.className="observablehq--string",i.textContent="`"+ve(a.slice(0,he).join("\n"));const o=n.appendChild(document.createElement("span")),s=a.length-he;return o.textContent=`Show ${s} truncated line${s>1?"s":""}`,o.className="observablehq--string-expand",o.addEventListener("mouseup",(function(a){a.stopPropagation(),Ie(n,Ne(e,t,!0,r))})),n}const i=document.createElement("span");r&&i.appendChild(y(r));const o=i.appendChild(document.createElement("span"));return o.className="observablehq--string"+(n?" observablehq--expanded":""),o.textContent="`"+ve(e)+"`",i}const a=document.createElement("span");r&&a.appendChild(y(r));const i=a.appendChild(document.createElement("span"));return i.className="observablehq--string",i.textContent=JSON.stringify(e.length>100?`${e.slice(0,50)}…${e.slice(-49)}`:e),a}function ve(e){return e.replace(/[\\`\x00-\x09\x0b-\x19]|\${/g,ge)}function ge(e){var t=e.charCodeAt(0);switch(t){case 8:return"\\b";case 9:return"\\t";case 11:return"\\v";case 12:return"\\f";case 13:return"\\r"}return t<16?"\\x0"+t.toString(16):t<32?"\\x"+t.toString(16):"\\"+e}function we(e,t){var n=0;while(t.exec(e))++n;return n}var ye=Function.prototype.toString,_e={prefix:"async ƒ"},ke={prefix:"async ƒ*"},xe={prefix:"class"},Ae={prefix:"ƒ"},Ee={prefix:"ƒ*"};function qe(e,t){var n,r,a=ye.call(e);switch(e.constructor&&e.constructor.name){case"AsyncFunction":n=_e;break;case"AsyncGeneratorFunction":n=ke;break;case"GeneratorFunction":n=Ee;break;default:n=/^class\b/.test(a)?xe:Ae;break}return n===xe?Se(n,"",t):(r=/^(?:async\s*)?(\w+)\s*=>/.exec(a))?Se(n,"("+r[1]+")",t):(r=/^(?:async\s*)?\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(a))||(r=/^(?:async\s*)?function(?:\s*\*)?(?:\s*\w+)?\s*\(\s*(\w+(?:\s*,\s*\w+)*)?\s*\)/.exec(a))?Se(n,r[1]?"("+r[1].replace(/\s*,\s*/g,", ")+")":"()",t):Se(n,"(…)",t)}function Se(e,t,n){var r=document.createElement("span");r.className="observablehq--function",n&&r.appendChild(y(n));var a=r.appendChild(document.createElement("span"));return a.className="observablehq--keyword",a.textContent=e.prefix,r.appendChild(document.createTextNode(t)),r}const{prototype:{toString:Te}}=Object;function Ne(e,t,n,r,a){let i=typeof e;switch(i){case"boolean":case"undefined":e+="";break;case"number":e=0===e&&1/e<0?"-0":e+"";break;case"bigint":e+="n";break;case"symbol":e=k(e,r);break;case"function":return qe(e,r);case"string":return be(e,t,n,r);default:if(null===e){i=null,e="null";break}if(e instanceof Date){i="date",e=ce(e,r);break}if(e===q){i="forbidden",e="[forbidden]";break}switch(Te.call(e)){case"[object RegExp]":i="regexp",e=me(e,r);break;case"[object Error]":case"[object DOMException]":i="error",e=fe(e,r);break;default:return(n?R:J)(e,t,r,a)}break}const o=document.createElement("span");r&&o.appendChild(y(r));const s=o.appendChild(document.createElement("span"));return s.className=`observablehq--${i}`,s.textContent=e,o}function Ie(e,t){e.classList.contains("observablehq--inspect")&&t.classList.add("observablehq--inspect"),e.parentNode.replaceChild(t,e),v(t,"load")}const Le=/\s+\(\d+:\d+\)$/m;class Ce{constructor(e){if(!e)throw new Error("invalid node");this._node=e,e.classList.add("observablehq")}pending(){const{_node:e}=this;e.classList.remove("observablehq--error"),e.classList.add("observablehq--running")}fulfilled(e,t){const{_node:n}=this;if((!je(e)||e.parentNode&&e.parentNode!==n)&&(e=Ne(e,!1,n.firstChild&&n.firstChild.classList&&n.firstChild.classList.contains("observablehq--expanded"),t),e.classList.add("observablehq--inspect")),n.classList.remove("observablehq--running","observablehq--error"),n.firstChild!==e)if(n.firstChild){while(n.lastChild!==n.firstChild)n.removeChild(n.lastChild);n.replaceChild(e,n.firstChild)}else n.appendChild(e);v(n,"update")}rejected(e,t){const{_node:n}=this;n.classList.remove("observablehq--running"),n.classList.add("observablehq--error");while(n.lastChild)n.removeChild(n.lastChild);var r=document.createElement("div");r.className="observablehq--inspect",t&&r.appendChild(y(t)),r.appendChild(document.createTextNode((e+"").replace(Le,""))),n.appendChild(r),v(n,"error",{error:e})}}function je(e){return(e instanceof Element||e instanceof Text)&&e instanceof e.constructor}Ce.into=function(e){if("string"===typeof e&&(e=document.querySelector(e),null==e))throw new Error("container not found");return function(){return new Ce(e.appendChild(document.createElement("div")))}};var Pe=n(9743);class Me extends Error{constructor(e,t){super(e),this.input=t}}Me.prototype.name="RuntimeError";n(4114),n(9848);function Re(e){return e&&"function"===typeof e.next&&"function"===typeof e.return}function De(e){return()=>e}function $e(e){return e}function Oe(e){return()=>{throw e}}const Fe=Array.prototype,Be=Fe.map;Fe.forEach;function Ve(){}const Ue=1,ze=2,Qe=3,We=Symbol("no-observer");function Ge(e,t,n,r){n||(n=We),Object.defineProperties(this,{_observer:{value:n,writable:!0},_definition:{value:Ke,writable:!0},_duplicate:{value:void 0,writable:!0},_duplicates:{value:void 0,writable:!0},_indegree:{value:NaN,writable:!0},_inputs:{value:[],writable:!0},_invalidate:{value:Ve,writable:!0},_module:{value:t},_name:{value:null,writable:!0},_outputs:{value:new Set,writable:!0},_promise:{value:Promise.resolve(void 0),writable:!0},_reachable:{value:n!==We,writable:!0},_rejector:{value:Xe(this)},_shadow:{value:He(t,r)},_type:{value:e},_value:{value:void 0,writable:!0},_version:{value:0,writable:!0}})}function He(e,t){return t?.shadow?new Map(Object.entries(t.shadow).map((([t,n])=>[t,new Ge(ze,e).define([],n)]))):null}function Ye(e){e._module._runtime._dirty.add(e),e._outputs.add(this)}function Je(e){e._module._runtime._dirty.add(e),e._outputs.delete(this)}function Ke(){throw Ke}function Ze(){throw Ze}function Xe(e){return t=>{if(t===Ze)throw t;if(t===Ke)throw new Me(`${e._name} is not defined`,e._name);if(t instanceof Error&&t.message)throw new Me(t.message,e._name);throw new Me(`${e._name} could not be resolved`,e._name)}}function et(e){return()=>{throw new Me(`${e} is defined more than once`)}}function tt(e,t,n){switch(arguments.length){case 1:n=e,e=t=null;break;case 2:n=t,"string"===typeof e?t=null:(t=e,e=null);break}return rt.call(this,null==e?null:String(e),null==t?[]:Be.call(t,this._resolve,this),"function"===typeof n?n:De(n))}function nt(e){return this._shadow?.get(e)??this._module._resolve(e)}function rt(e,t,n){const r=this._module._scope,a=this._module._runtime;if(this._inputs.forEach(Je,this),t.forEach(Ye,this),this._inputs=t,this._definition=n,this._value=void 0,n===Ve?a._variables.delete(this):a._variables.add(this),e!==this._name||r.get(e)!==this){let t,i;if(this._name)if(this._outputs.size)r.delete(this._name),i=this._module._resolve(this._name),i._outputs=this._outputs,this._outputs=new Set,i._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(this)]=i}),this),i._outputs.forEach(a._updates.add,a._updates),a._dirty.add(i).add(this),r.set(this._name,i);else if((i=r.get(this._name))===this)r.delete(this._name);else{if(i._type!==Qe)throw new Error;i._duplicates.delete(this),this._duplicate=void 0,1===i._duplicates.size&&(i=i._duplicates.keys().next().value,t=r.get(this._name),i._outputs=t._outputs,t._outputs=new Set,i._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(t)]=i})),i._definition=i._duplicate,i._duplicate=void 0,a._dirty.add(t).add(i),a._updates.add(i),r.set(this._name,i))}if(this._outputs.size)throw new Error;e&&((i=r.get(e))?i._type===Qe?(this._definition=et(e),this._duplicate=n,i._duplicates.add(this)):i._type===ze?(this._outputs=i._outputs,i._outputs=new Set,this._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(i)]=this}),this),a._dirty.add(i).add(this),r.set(e,this)):(i._duplicate=i._definition,this._duplicate=n,t=new Ge(Qe,this._module),t._name=e,t._definition=this._definition=i._definition=et(e),t._outputs=i._outputs,i._outputs=new Set,t._outputs.forEach((function(e){e._inputs[e._inputs.indexOf(i)]=t})),t._duplicates=new Set([this,i]),a._dirty.add(i).add(t),a._updates.add(i).add(t),r.set(e,t)):r.set(e,this)),this._name=e}return this._version>0&&++this._version,a._updates.add(this),a._compute(),this}function at(e,t,n){return arguments.length<3&&(n=t,t=e),rt.call(this,String(t),[n._resolve(String(e))],$e)}function it(){return rt.call(this,null,[],Ve)}function ot(){this._observer.pending&&this._observer.pending()}function st(e){this._observer.fulfilled&&this._observer.fulfilled(e,this._name)}function lt(e){this._observer.rejected&&this._observer.rejected(e,this._name)}Object.defineProperties(Ge.prototype,{_pending:{value:ot,writable:!0,configurable:!0},_fulfilled:{value:st,writable:!0,configurable:!0},_rejected:{value:lt,writable:!0,configurable:!0},_resolve:{value:nt,writable:!0,configurable:!0},define:{value:tt,writable:!0,configurable:!0},delete:{value:it,writable:!0,configurable:!0},import:{value:at,writable:!0,configurable:!0}});const ut=Symbol("variable"),ct=Symbol("invalidation"),dt=Symbol("visibility");function ft(e,t=[]){Object.defineProperties(this,{_runtime:{value:e},_scope:{value:new Map},_builtins:{value:new Map([["@variable",ut],["invalidation",ct],["visibility",dt],...t])},_source:{value:null,writable:!0}})}function pt(e){const t=this._scope.get(e);if(!t)throw new Me(`${e} is not defined`);if(t._type===Qe)throw new Me(`${e} is defined more than once`);return t.define.apply(t,arguments)}function mt(){const e=new Ge(Ue,this);return e.define.apply(e,arguments)}function ht(){const e=new Ge(Ue,this);return e.import.apply(e,arguments)}function bt(e,t){return new Ge(Ue,this,e,t)}async function vt(e){let t=this._scope.get(e);if(!t)throw new Me(`${e} is not defined`);if(t._observer!==We)return gt(this._runtime,t);t=this.variable(!0).define([e],$e);try{return await gt(this._runtime,t)}finally{t.delete()}}async function gt(e,t){await e._compute();try{return await t._promise}catch(n){if(n===Ze)return gt(e,t);throw n}}function wt(e,t){const n=new Map,r=new Set,a=[];function i(e){let t=n.get(e);return t||(t=new ft(e._runtime,e._builtins),t._source=e,n.set(e,t),a.push([t,e]),r.add(e),t)}const o=i(this);for(const s of e){const{alias:e,name:n}="object"===typeof s?s:{name:s};o.import(n,null==e?n:e,t)}for(const s of r)for(const[e,t]of s._scope)if(t._definition===$e){if(s===this&&o._scope.has(e))continue;const n=t._inputs[0]._module;n._source&&i(n)}for(const[s,l]of a)for(const[e,t]of l._scope){const r=s._scope.get(e);if(!r||r._type===ze)if(t._definition===$e){const r=t._inputs[0],a=r._module;s.import(r._name,e,n.get(a)||a)}else s.define(e,t._inputs.map(kt),t._definition)}return o}function yt(e){let t,n=this._scope.get(e);if(!n)if(n=new Ge(ze,this),this._builtins.has(e))n.define(e,De(this._builtins.get(e)));else if(this._runtime._builtin._scope.has(e))n.import(e,this._runtime._builtin);else{try{t=this._runtime._global(e)}catch(r){return n.define(e,Oe(r))}void 0===t?this._scope.set(n._name=e,n):n.define(e,De(t))}return n}function _t(e,t){this._builtins.set(e,t)}function kt(e){return e._name}Object.defineProperties(ft.prototype,{_resolve:{value:yt,writable:!0,configurable:!0},redefine:{value:pt,writable:!0,configurable:!0},define:{value:mt,writable:!0,configurable:!0},derive:{value:wt,writable:!0,configurable:!0},import:{value:ht,writable:!0,configurable:!0},value:{value:vt,writable:!0,configurable:!0},variable:{value:bt,writable:!0,configurable:!0},builtin:{value:_t,writable:!0,configurable:!0}});const xt="function"===typeof requestAnimationFrame?requestAnimationFrame:"function"===typeof setImmediate?setImmediate:e=>setTimeout(e,0);function At(e=new Pe.Library,t=Ut){const n=this.module();if(Object.defineProperties(this,{_dirty:{value:new Set},_updates:{value:new Set},_precomputes:{value:[],writable:!0},_computing:{value:null,writable:!0},_init:{value:null,writable:!0},_modules:{value:new Map},_variables:{value:new Set},_disposed:{value:!1,writable:!0},_builtin:{value:n},_global:{value:t}}),e)for(const r in e)new Ge(ze,n).define(r,[],e[r])}function Et(){this._computing=Promise.resolve(),this._disposed=!0,this._variables.forEach((e=>{e._invalidate(),e._version=NaN}))}function qt(e,t=Ve){let n;if(void 0===e)return(n=this._init)?(this._init=null,n):new ft(this);if(n=this._modules.get(e),n)return n;this._init=n=new ft(this),this._modules.set(e,n);try{e(this,t)}finally{this._init=null}return n}function St(e){this._precomputes.push(e),this._compute()}function Tt(){return this._computing||(this._computing=this._computeSoon())}function Nt(){return new Promise(xt).then((()=>this._disposed?void 0:this._computeNow()))}async function It(){let e,t,n=[],r=this._precomputes;if(r.length){this._precomputes=[];for(const e of r)e();await Lt(3)}e=new Set(this._dirty),e.forEach((function(t){t._inputs.forEach(e.add,e);const n=Vt(t);n>t._reachable?this._updates.add(t):n<t._reachable&&t._invalidate(),t._reachable=n}),this),e=new Set(this._updates),e.forEach((function(t){t._reachable?(t._indegree=0,t._outputs.forEach(e.add,e)):(t._indegree=NaN,e.delete(t))})),this._computing=null,this._updates.clear(),this._dirty.clear(),e.forEach((function(e){e._outputs.forEach(jt)}));do{e.forEach((function(e){0===e._indegree&&n.push(e)}));while(t=n.pop())$t(t),t._outputs.forEach(a),e.delete(t);e.forEach((function(t){Ct(t)&&(Ft(t,new Me("circular definition")),t._outputs.forEach(Pt),e.delete(t))}))}while(e.size);function a(e){0===--e._indegree&&n.push(e)}}function Lt(e=0){let t=Promise.resolve();for(let n=0;n<e;++n)t=t.then((()=>{}));return t}function Ct(e){const t=new Set(e._inputs);for(const n of t){if(n===e)return!0;n._inputs.forEach(t.add,t)}return!1}function jt(e){++e._indegree}function Pt(e){--e._indegree}function Mt(e){return e._promise.catch(e._rejector)}function Rt(e){return new Promise((function(t){e._invalidate=t}))}function Dt(e,t){let n,r,a="function"===typeof IntersectionObserver&&t._observer&&t._observer._node,i=!a,o=Ve,s=Ve;return a&&(r=new IntersectionObserver((([e])=>(i=e.isIntersecting)&&(n=null,o()))),r.observe(a),e.then((()=>(r.disconnect(),r=null,s())))),function(e){return i?Promise.resolve(e):r?(n||(n=new Promise(((e,t)=>(o=e,s=t)))),n.then((()=>e))):Promise.reject()}}function $t(e){e._invalidate(),e._invalidate=Ve,e._pending();const t=e._value,n=++e._version;let r=null;const a=e._promise=(e._inputs.length?Promise.all(e._inputs.map(Mt)).then(i):new Promise((n=>n(e._definition.call(t))))).then(o);function i(a){if(e._version!==n)throw Ze;for(let t=0,n=a.length;t<n;++t)switch(a[t]){case ct:a[t]=r=Rt(e);break;case dt:r||(r=Rt(e)),a[t]=Dt(r,e);break;case ut:a[t]=e;break}return e._definition.apply(t,a)}function o(t){if(e._version!==n)throw Ze;return Re(t)?((r||Rt(e)).then(Bt(t)),Ot(e,n,t)):t}a.then((t=>{e._value=t,e._fulfilled(t)}),(t=>{t!==Ze&&e._version===n&&(e._value=void 0,e._rejected(t))}))}function Ot(e,t,n){const r=e._module._runtime;let a;function i(e){return new Promise((e=>e(n.next(a)))).then((({done:t,value:n})=>t?void 0:Promise.resolve(n).then(e)))}function o(){const n=i((i=>{if(e._version!==t)throw Ze;return a=i,s(i,n).then((()=>r._precompute(o))),e._fulfilled(i),i}));n.catch((r=>{r!==Ze&&e._version===t&&(s(void 0,n),e._rejected(r))}))}function s(t,n){return e._value=t,e._promise=n,e._outputs.forEach(r._updates.add,r._updates),r._compute()}return i((n=>{if(e._version!==t)throw Ze;return a=n,r._precompute(o),n}))}function Ft(e,t){e._invalidate(),e._invalidate=Ve,e._pending(),++e._version,e._indegree=NaN,(e._promise=Promise.reject(t)).catch(Ve),e._value=void 0,e._rejected(t)}function Bt(e){return function(){e.return()}}function Vt(e){if(e._observer!==We)return!0;const t=new Set(e._outputs);for(const n of t){if(n._observer!==We)return!0;n._outputs.forEach(t.add,t)}return!1}function Ut(e){return globalThis[e]}Object.defineProperties(At.prototype,{_precompute:{value:St,writable:!0,configurable:!0},_compute:{value:Tt,writable:!0,configurable:!0},_computeSoon:{value:Nt,writable:!0,configurable:!0},_computeNow:{value:It,writable:!0,configurable:!0},dispose:{value:Et,writable:!0,configurable:!0},module:{value:qt,writable:!0,configurable:!0},fileAttachments:{value:Pe.FileAttachments,writable:!0,configurable:!0}});var zt=n(3796);n(4603),n(7566),n(8721);function Qt(e){return e`# Introduction to inputs

These lightweight interface components — buttons, sliders, dropdowns, tables, and the like — help you explore data and build interactive displays. For a walkthrough of how you might use these to support data analysis, see [Hello, Inputs!](/@observablehq/hello-inputs)`}function Wt(e){return e`---
## Usage

Declare your inputs with [viewof](/@observablehq/introduction-to-views), like so:`}function Gt(e){return e.range([0,11],{value:5,step:.1,label:"Gain"})}function Ht(e){return e`Now you can reference the input’s value (here *gain*) in any cell, and the cell will run whenever the input changes. No event listeners required!`}function Yt(e){return e}function Jt(e,t){return t`The current gain is ${e.toFixed(1)}!`}function Kt(e){return e`Observable Inputs are released under the [ISC license](https://github.com/observablehq/inputs/blob/main/LICENSE) and depend only on [Hypertext Literal](/@observablehq/htl), our tagged template literal for safely generating dynamic HTML. If you are interested in contributing or wish to report an issue, please see [our repository](https://github.com/observablehq/inputs). For recent changes, please see [our release notes](https://github.com/observablehq/inputs/releases).`}function Zt(e){return e`---

## Basics

These basic inputs will get you started.

* [Button](/@observablehq/input-button) - do something when a button is clicked
* [Toggle](/@observablehq/input-toggle) - toggle between two values (on or off)
* [Checkbox](/@observablehq/input-checkbox) - choose any from a set
* [Radio](/@observablehq/input-radio) - choose one from a set
* [Range](/@observablehq/input-range) or [Number](/@observablehq/input-range) - choose a number in a range (slider)
* [Select](/@observablehq/input-select) - choose one or any from a set (drop-down menu)
* [Text](/@observablehq/input-text) - enter freeform single-line text
* [Textarea](/@observablehq/input-textarea) - enter freeform multi-line text
* [Date](/@observablehq/input-date) or [Datetime](/@observablehq/input-date) - choose a date
* [Color](/@observablehq/input-color) - choose a color
* [File](/@observablehq/input-file) - choose a local file`}function Xt(e){return e`---

### [Button](/@observablehq/input-button) 

Do something when a button is clicked. [Examples ›](/@observablehq/input-button) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#button)`}function en(e){return e.button("Click me")}function tn(e){return e}function nn(e){return e`---

### [Toggle](/@observablehq/input-toggle) 

Toggle between two values (on or off). [Examples ›](/@observablehq/input-toggle) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#toggle)`}function rn(e){return e.toggle({label:"Mute"})}function an(e){return e}function on(e){return e`---

### [Checkbox](/@observablehq/input-checkbox) 

Choose any from a set. [Examples ›](/@observablehq/input-checkbox) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#checkbox)`}function sn(e){return e.checkbox(["salty","sweet","bitter","sour","umami"],{label:"Flavors"})}function ln(e){return e}function un(e){return e`---

### [Radio](/@observablehq/input-radio)

Choose one from a set. [Examples ›](/@observablehq/input-radio) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#radio)`}function cn(e){return e.radio(["salty","sweet","bitter","sour","umami"],{label:"Flavor"})}function dn(e){return e}function fn(e){return e`---

### [Range](/@observablehq/input-range)

Pick a number. [Examples ›](/@observablehq/input-range) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#range)`}function pn(e){return e.range([0,255],{step:1,label:"Favorite number"})}function mn(e){return e}function hn(e){return e`---

### [Select](/@observablehq/input-select)

Choose one, or any, from a menu. [Examples ›](/@observablehq/input-select) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#select)`}function bn(e,t){return e.select([null].concat(t),{label:"Home state"})}function vn(e){return e}function gn(e,t){return e.select(t,{label:"Visited states",multiple:!0})}function wn(e){return e}function yn(e){return e`---

### [Text](/@observablehq/input-text)

Enter freeform single-line text. [Examples ›](/@observablehq/input-text) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#text)`}function _n(e){return e.text({label:"Name",placeholder:"What’s your name?"})}function kn(e){return e}function xn(e){return e`---

### [Textarea](/@observablehq/input-textarea)

Enter freeform multi-line text. [Examples ›](/@observablehq/input-textarea) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#textarea)`}function An(e){return e.textarea({label:"Biography",placeholder:"What’s your story?"})}function En(e){return e}function qn(e){return e`---

### [Date](/@observablehq/input-date)

Choose a date, or a date and time. [Examples ›](/@observablehq/input-date) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#date)`}function Sn(e){return e.date({label:"Birthday"})}function Tn(e){return e}function Nn(e){return e`---

### [Color](/@observablehq/input-color)

Choose a color. [Examples ›](/@observablehq/input-color) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#color)`}function In(e){return e.color({label:"Favorite color",value:"#4682b4"})}function Ln(e){return e}function Cn(e){return e`---

### [File](/@observablehq/input-file)

Choose a local file. [Examples ›](/@observablehq/input-file) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#file)`}function jn(e){return e.file({label:"CSV file",accept:".csv",required:!0})}function Pn(e){return e.csv({typed:!0})}function Mn(e){return e`---

## Tabular data

These fancy inputs are designed to work with tabular data such as CSV or TSV [file attachments](/@observablehq/file-attachments) and [database clients](/@observablehq/databases).

* [Search](/@observablehq/input-search) - query a tabular dataset
* [Table](/@observablehq/input-table) - browse a tabular dataset`}function Rn(e){return e`---

### [Search](/@observablehq/input-search)

Query a tabular dataset. [Examples ›](/@observablehq/input-search) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#search)`}function Dn(e,t){return e.search(t,{placeholder:"Search U.S. capitals"})}function $n(e){return e}function On(e){return e`---

### [Table](/@observablehq/input-table)

Browse a tabular dataset. [Examples ›](/@observablehq/input-table) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#table)`}function Fn(e,t){return e.table(t)}function Bn(e){return e}function Vn(e){return e`---

## And more!

Got the basics? Here are a few more advanced techniques:

* [Form](https://observablehq.com/@observablehq/input-form?collection=@observablehq/inputs) - combine multiple inputs for a compact display
* [Synchronized inputs](https://observablehq.com/@observablehq/synchronized-inputs?collection=@observablehq/inputs) - bind two or more inputs
* [Introduction to Views](/@observablehq/introduction-to-views) - more on Observable’s viewof`}function Un(e){return e`We are grateful to Jeremy Ashkenas for blazing the trail with [“The Grand Native Inputs Bazaar”](/@jashkenas/inputs). To migrate from Jeremy’s inputs to our new official inputs, consider our [legacy inputs](/@observablehq/legacy-inputs).`}function zn(e){return e`For even more, consider these “friends & family” inputs and techniques shared by the Observable community:`}function Qn(e,t){return e.table([[["2D Slider","/d/98bbb19bf9e859ee"],"Fabian Iwand","a two-dimensional range"],[["Binary Input","/@rreusser/binary-input"],"Ricky Reusser","bitwise IEEE floating point"],[["DIY inputs","/@bartok32/diy-inputs"],"Bartosz Prusinowski","inputs with fun, custom styles"],[["FineRange","/@rreusser/fine-range"],"Ricky Reusser","high-precision numeric control"],[["Form Input","/@mbostock/form-input"],"Mike Bostock","multiple inputs in single cell"],[["Inputs","/@jashkenas/inputs"],"Jeremy Ashkenas","the original"],[["Player","/@oscar6echo/player"],"oscar6echo","detailed timing control for animation"],[["Scrubber","/@mbostock/scrubber"],"Mike Bostock","play/pause/scrub control for animation"],[["Range Slider","/@mootari/range-slider"],"Fabian Iwand","a two-ended range"],[["Ternary Slider","/@yurivish/ternary-slider"],"Yuri Vishnevsky","a proportion of three values"],[["Data driven range sliders","/@bumbeishvili/data-driven-range-sliders"],"David B.","a range input with a histogram"],[["Snapping Histogram Slider","/@trebor/snapping-histogram-slider"],"Robert Harris","a range input with a histogram"],[["Inputs in grid","/@bumbeishvili/input-groups"],"David B.","combine multiple inputs into a compact grid"],[["List Input","/@harrislapiroff/list-input"],"Harris L.","enter more than one of something"],[["Copier","/@mbostock/copier"],"Mike Bostock","a button to copy to the clipboard"],[["Tangle","/@mbostock/tangle"],"Mike Bostock","Bret Victor-inspired inline scrubbable numbers"],[["Editor","/@cmudig/editor"],"CMU Data Interaction Group","code editor with syntax highlighting"],[["Color Scheme Picker","/@zechasault/color-schemes-and-interpolators-picker"],"Zack Ciminera","pick a D3 color scheme"],[["Easing Curve Editor","/@nhogs/easing-graphs-editor"],"Nhogs","create a custom easing curve"]].map((([e,t,n])=>({Name:e,Author:t,Description:n}))),{sort:"Name",rows:1/0,layout:"auto",width:{Description:"60%"},format:{Name:([e,n])=>t`<a href=${n} target=_blank>${e}`}})}function Wn(e){return e`To share your reusable input or technique, please leave a comment.`}function Gn(e){return e`---

## Appendix`}function Hn(e){return e("us-state-capitals.tsv").tsv({typed:!0})}function Yn(e){return e.map((e=>e.State))}function Jn(e){return e`The cells below provide deprecated aliases for older versions of Inputs. Please use Inputs.button *etc.* instead of importing from this notebook.`}function Kn(e){return e.button}function Zn(e){return e.toggle}function Xn(e){return e.radio}function er(e){return e.checkbox}function tr(e){return e.range}function nr(e){return e.select}function rr(e){return e.text}function ar(e){return e.textarea}function ir(e){return e.search}function or(e){return e.table}function sr(e){return e.input}function lr(e){return e.bind}function ur(e){return e.disposal}function cr(e){return e.svg}function dr(e){return e.html}function fr(e,t){const r=e.module();function a(){return this.url}const i=new Map([["us-state-capitals.tsv",{url:new URL(n(4018),n.b),mimeType:"text/tab-separated-values",toString:a}]]);return r.builtin("FileAttachment",e.fileAttachments((e=>i.get(e)))),r.variable(t()).define(["md"],Qt),r.variable(t("usage")).define("usage",["md"],Wt),r.variable(t("viewof gain")).define("viewof gain",["Inputs"],Gt),r.variable(t("gain")).define("gain",["Generators","viewof gain"],((e,t)=>e.input(t))),r.variable(t("now")).define("now",["md"],Ht),r.variable(t("gain2")).define("gain2",["gain"],Yt),r.variable(t("currentgain")).define("currentgain",["gain","md"],Jt),r.variable(t()).define(["md"],Kt),r.variable(t("basics")).define("basics",["md"],Zt),r.variable(t("button")).define("button",["md"],Xt),r.variable(t("viewof clicks")).define("viewof clicks",["Inputs"],en),r.variable(t("clicks")).define("clicks",["Generators","viewof clicks"],((e,t)=>e.input(t))),r.variable(t()).define(["clicks"],tn),r.variable(t("toggle")).define("toggle",["md"],nn),r.variable(t("viewof mute")).define("viewof mute",["Inputs"],rn),r.variable(t("mute")).define("mute",["Generators","viewof mute"],((e,t)=>e.input(t))),r.variable(t()).define(["mute"],an),r.variable(t("checkbox")).define("checkbox",["md"],on),r.variable(t("viewof flavors")).define("viewof flavors",["Inputs"],sn),r.variable(t("flavors")).define("flavors",["Generators","viewof flavors"],((e,t)=>e.input(t))),r.variable(t()).define(["flavors"],ln),r.variable(t("radio")).define("radio",["md"],un),r.variable(t("viewof flavor")).define("viewof flavor",["Inputs"],cn),r.variable(t("flavor")).define("flavor",["Generators","viewof flavor"],((e,t)=>e.input(t))),r.variable(t()).define(["flavor"],dn),r.variable(t("range")).define("range",["md"],fn),r.variable(t("viewof n")).define("viewof n",["Inputs"],pn),r.variable(t("n")).define("n",["Generators","viewof n"],((e,t)=>e.input(t))),r.variable(t()).define(["n"],mn),r.variable(t("select")).define("select",["md"],hn),r.variable(t("viewof homeState")).define("viewof homeState",["Inputs","stateNames"],bn),r.variable(t("homeState")).define("homeState",["Generators","viewof homeState"],((e,t)=>e.input(t))),r.variable(t()).define(["homeState"],vn),r.variable(t("viewof visitedStates")).define("viewof visitedStates",["Inputs","stateNames"],gn),r.variable(t("visitedStates")).define("visitedStates",["Generators","viewof visitedStates"],((e,t)=>e.input(t))),r.variable(t()).define(["visitedStates"],wn),r.variable(t()).define(["md"],yn),r.variable(t("viewof name")).define("viewof name",["Inputs"],_n),r.variable(t("name")).define("name",["Generators","viewof name"],((e,t)=>e.input(t))),r.variable(t()).define(["name"],kn),r.variable(t()).define(["md"],xn),r.variable(t("viewof bio")).define("viewof bio",["Inputs"],An),r.variable(t("bio")).define("bio",["Generators","viewof bio"],((e,t)=>e.input(t))),r.variable(t()).define(["bio"],En),r.variable(t()).define(["md"],qn),r.variable(t("viewof birthday")).define("viewof birthday",["Inputs"],Sn),r.variable(t("birthday")).define("birthday",["Generators","viewof birthday"],((e,t)=>e.input(t))),r.variable(t()).define(["birthday"],Tn),r.variable(t()).define(["md"],Nn),r.variable(t("viewof color")).define("viewof color",["Inputs"],In),r.variable(t("color")).define("color",["Generators","viewof color"],((e,t)=>e.input(t))),r.variable(t()).define(["color"],Ln),r.variable(t()).define(["md"],Cn),r.variable(t("viewof file")).define("viewof file",["Inputs"],jn),r.variable(t("file")).define("file",["Generators","viewof file"],((e,t)=>e.input(t))),r.variable(t("data")).define("data",["file"],Pn),r.variable(t("tables")).define("tables",["md"],Mn),r.variable(t()).define(["md"],Rn),r.variable(t("viewof search")).define("viewof search",["Inputs","capitals"],Dn),r.variable(t("search")).define("search",["Generators","viewof search"],((e,t)=>e.input(t))),r.variable(t()).define(["search"],$n),r.variable(t()).define(["md"],On),r.variable(t("viewof rows")).define("viewof rows",["Inputs","search"],Fn),r.variable(t("rows")).define("rows",["Generators","viewof rows"],((e,t)=>e.input(t))),r.variable(t()).define(["rows"],Bn),r.variable(t("techniques")).define("techniques",["md"],Vn),r.variable(t()).define(["md"],Un),r.variable(t()).define(["md"],zn),r.variable(t()).define(["Inputs","html"],Qn),r.variable(t()).define(["md"],Wn),r.variable(t()).define(["md"],Gn),r.variable(t("capitals")).define("capitals",["FileAttachment"],Hn),r.variable(t("stateNames")).define("stateNames",["capitals"],Yn),r.variable(t()).define(["md"],Jn),r.variable(t("Button")).define("Button",["Inputs"],Kn),r.variable(t("Toggle")).define("Toggle",["Inputs"],Zn),r.variable(t("Radio")).define("Radio",["Inputs"],Xn),r.variable(t("Checkbox")).define("Checkbox",["Inputs"],er),r.variable(t("Range")).define("Range",["Inputs"],tr),r.variable(t("Select")).define("Select",["Inputs"],nr),r.variable(t("Text")).define("Text",["Inputs"],rr),r.variable(t("Textarea")).define("Textarea",["Inputs"],ar),r.variable(t("Search")).define("Search",["Inputs"],ir),r.variable(t("Table")).define("Table",["Inputs"],or),r.variable(t("Input")).define("Input",["Inputs"],sr),r.variable(t("bind")).define("bind",["Inputs"],lr),r.variable(t("disposal")).define("disposal",["Inputs"],ur),r.variable(t("svg")).define("svg",["htl"],cr),r.variable(t("html")).define("html",["htl"],dr),r}function pr(e){return e`# Vega-Lite API v5`}function mr(e){return e`The [Vega-Lite JavaScript API](https://github.com/vega/vega-lite-api/) provides a convenient way to write [Vega-Lite](https://vega.github.io/vega-lite) specifications in a programmatic fashion. Scroll down for some usage examples, or browse the [Vega-Lite API example collection](https://observablehq.com/collection/@vega/vega-lite-api)! 

_This notebook uses **version 5** of Vega-Lite and the corresponding Vega-Lite API v5._ To see what's new in version 5, [have a look at the changelog](https://github.com/vega/vega-lite/releases/tag/v5.0.0). To use Vega-Lite version 4, see the [Vega-Lite API v4 notebook](https://observablehq.com/@vega/vega-lite-api) instead.

Want to learn more about data visualization and how to use the Vega-Lite API? Read the [introduction to Vega-Lite](https://observablehq.com/@uwdata/introduction-to-vega-lite) and the [data visualization curriculum](https://observablehq.com/@uwdata/data-visualization-curriculum?collection=@uwdata/visualization-curriculum).`}function hr(e){return e`
The cell below imports the Vega-Lite API and registers the desired versions of Vega and Vega-Lite, along with default [Vega View options](https://vega.github.io/vega/docs/api/view/#view) and [Vega-Lite configuration](https://vega.github.io/vega-lite/docs/config.html):
`}async function br(e,t,n,r,a){const[i,o,s,l]=await Promise.all([`vega@${e}`,`vega-lite@${t}`,`vega-lite-api@${n}`,`vega-tooltip@${r}`].map((e=>a(e)))),u={config:{config:{view:{continuousWidth:400,continuousHeight:300},mark:{tooltip:null}}},init:e=>{e.tooltip((new l.Handler).call),e.container()&&(e.container().style["overflow-x"]="auto")},view:{loader:i.loader({baseURL:"https://cdn.jsdelivr.net/npm/vega-datasets@2/"}),renderer:"canvas"}};return s.register(i,o,u)}function vr(){return"5.6.0"}function gr(){return"5.6.0"}function wr(){return"5.23.0"}function yr(){return"0.30.0"}function _r(e){return e`To use the same setup in your own notebooks, add a cell with the following code:
~~~ js
import {vl} from '@vega/vega-lite-api-v5'
~~~
To use the API outside of Observable, see the [stand-alone usage instructions](#standalone_use) below.
`}function kr(e){return e`<hr/>
## Zip Codes

A dot for each zip code in the United States, colored by the first digit.
`}function xr(e,t){return e.markSquare({size:2,opacity:1}).data("data/zipcodes.csv").transform(e.calculate("substring(datum.zip_code, 0, 1)").as("digit")).project(e.projection("albersUsa")).encode(e.longitude().fieldQ("longitude"),e.latitude().fieldQ("latitude"),e.color().fieldN("digit")).width(t).height(Math.floor(t/1.75)).autosize({type:"fit-x",contains:"padding"}).config({view:{stroke:null}}).render()}function Ar(e){return e`<hr/>
## Interactive Seattle Weather 2012-2015

A scatter plot and summary histogram with linked selections between plots to perform cross-filtering and configure conditional color encodings.
`}function Er(e,t){const n=e.selectInterval().encodings("x"),r=e.selectPoint().encodings("color"),a={domain:["sun","fog","drizzle","rain","snow"],range:["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]},i=e.markPoint({filled:!0}).encode(e.color().value("lightgray").if(n,e.color().fieldN("weather").scale(a).title("Weather")),e.size().fieldQ("precipitation").scale({domain:[-1,50],range:[10,500]}).title("Precipitation"),e.order().fieldQ("precipitation").sort("descending"),e.x().timeMD("date").axis({title:"Date",format:"%b"}),e.y().fieldQ("temp_max").scale({domain:[-5,40]}).axis({title:"Maximum Daily Temperature (°C)"})).width(t).height(300).params(n).transform(e.filter(r)),o=e.markBar().encode(e.color().if(r,e.color().fieldN("weather")).value("lightgray").scale(a).title("Weather"),e.x().count(),e.y().fieldN("weather").scale({domain:a.domain}).title("Weather")).width(t).params(r).transform(e.filter(n));return e.vconcat(i,o).data("data/seattle-weather.csv").autosize({type:"fit-x",contains:"padding"}).render()}function qr(e){return e`<hr/>
## Population Pyramid

A [population pyramid](https://en.wikipedia.org/wiki/Population_pyramid) shows the distribution of age groups in a population. Drag the slider to see the U.S. change over time, but watch out for [missing data in 1890!](https://www.census.gov/history/www/faqs/genealogy_faqs/why_cant_i_find_1890_census_records.html) The slider is generated internally by binding the \`Year\` parameter using \`vl.slider()\`.`}function Sr(e){return e.markBar({opacity:.4}).params(e.param("Year").value(2e3).bind(e.slider(1850,2e3,10))).data("data/population.json").transform(e.calculate('datum.sex === 1 ? "Male" : "Female"').as("sex"),e.filter("datum.year === Year")).encode(e.x().sum("people").scale({domain:[0,12e6]}).stack(null).title("People"),e.y().fieldO("age").sort("descending").title("Age"),e.color().fieldN("sex").scale({range:["#675193","#ca8861"]}).title("Sex")).height(300).render()}function Tr(e){return e`### Bind Parameters to External Inputs

As an alternative to having Vega-Lite generate its own input widgets (as with \`vl.slider()\` above), we can also directly bind a Vega-Lite parameter to an existing widget, such as Observable's \`Range\` component:`}function Nr(e){return e([1850,2e3],{step:10,value:2e3})}function Ir(e,t){return e.markBar({opacity:.4}).params(e.param("Year").bind(t)).data("data/population.json").transform(e.calculate('datum.sex === 1 ? "Male" : "Female"').as("sex"),e.filter("datum.year === Year")).encode(e.x().sum("people").scale({domain:[0,12e6]}).stack(null).title("People"),e.y().fieldO("age").sort("descending").title("Age"),e.color().fieldN("sex").scale({range:["#675193","#ca8861"]}).title("Sex")).height(300).render()}function Lr(e){return e`<hr/>
## Dynamic Query Scatter Plot

A scatter plot of automobile mileage and horsepower. (Shift-)Click the legend and drag the slider to filter by Origin and Year.`}function Cr(e){const t=e.selectPoint("isOrigin").fields("Origin").bind("legend"),n=e.selectPoint("isYear").fields("Year").value(1970).bind(e.slider(1970,1980,1).name("Year")),r=e.and(t,n);return e.markCircle().data("data/cars.json").transform(e.calculate("year(datum.Year)").as("Year")).params(t,n).encode(e.x().fieldQ("Horsepower"),e.y().fieldQ("Miles_per_Gallon"),e.color().if(r,e.color().fieldN("Origin")).value("grey"),e.opacity().if(r,e.value(1)).value(.2)).render()}function jr(e){return e`<hr/>
## Parallel Coordinates

A [parallel coordinates plot](https://en.wikipedia.org/wiki/Parallel_coordinates) that uses \`window\` and \`fold\` transforms to convert the four dimensions of penguin measurements into normalized coordinates that can be visualized as \`line\` marks. The graphic includes an additional layer with custom \`text\` mark labels for the parallel axis grid lines. We render the plot as SVG by passing \`{renderer:'svg'}\` to the \`render\` method.
`}function Pr(e,t){const n=["Beak Length (mm)","Beak Depth (mm)","Flipper Length (mm)","Body Mass (g)"],r={type:"point",padding:0},a={domain:!1,ticks:!1,title:!1,grid:!0,gridColor:"#888",labelAngle:0,labelPadding:8,labelFontWeight:"bold"},i=e.markLine({strokeWidth:1.5,opacity:.5}).encode(e.color().fieldN("Species").sort("descending"),e.detail().fieldN("index"),e.x().fieldO("key").scale(r).axis(a),e.y().fieldQ("fraction").axis(null)),o=e.markText({dx:-2,align:"right",baseline:"middle"}).transform(e.groupby("key").aggregate(e.min("value").as("min"),e.max("value").as("max")),e.fold("min","max").as("op","value"),e.groupby("key").window(e.percent_rank("value").as("fraction"))).encode(e.x().fieldN("key"),e.y().fieldQ("fraction").axis(null),e.text().field("value").format(",")),s=e.layer(i,o).data("data/penguins.json").transform(e.filter('datum["Beak Length (mm)"] != null'),e.window(e.row_number().as("index")),e.fold(n).as("key","value"),e.groupby("key").join(e.min("value").as("min"),e.max("value").as("max")),e.calculate("(datum.value - datum.min) / (datum.max - datum.min)").as("fraction")).width(t).height(300).autosize({type:"fit-x",contains:"padding"});return s.render({renderer:"svg"})}function Mr(e,t){return e`<hr/>
## Stand-Alone Usage in a Web Browser

To use the Vega-Lite API in the browser outside of Observable, you need to include all the dependencies, set the default configuration, and then register the Vega libraries. Here is some starting code to build from:

~~~html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite-api@${t}"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-tooltip"></script>
  </head>
  <body>
    <div id="view"></div>

    <script>
      // setup API options
      const options = {
        config: {
          // Vega-Lite default configuration
        },
        init: (view) => {
          // initialize tooltip handler
          view.tooltip(new vegaTooltip.Handler().call);
        },
        view: {
          // view constructor options
          // remove the loader if you don't want to default to vega-datasets!
          loader: vega.loader({
            baseURL: "https://cdn.jsdelivr.net/npm/vega-datasets@2/",
          }),
          renderer: "canvas",
        },
      };

      // register vega and vega-lite with the API
      vl.register(vega, vegaLite, options);

      // now you can use the API!
      vl.markBar({ tooltip: true })
        .data([
          { a: "A", b: 28 }, { a: "B", b: 55 }, { a: "C", b: 43 },
          { a: "D", b: 91 }, { a: "E", b: 81 }, { a: "F", b: 53 },
          { a: "G", b: 19 }, { a: "H", b: 87 }, { a: "I", b: 52 },
        ])
        .encode(
          vl.x().fieldQ("b"),
          vl.y().fieldN("a"),
          vl.tooltip([vl.fieldQ("b"), vl.fieldN("a")])
        )
        .render()
        .then(viewElement => {
          // render returns a promise to a DOM element containing the chart
          // viewElement.value contains the Vega View object instance
          document.getElementById('view').appendChild(viewElement);
        });
    </script>
  </body>
</html>

~~~`}function Rr(e,t){const n=e.module();n.variable(t()).define(["md"],pr),n.variable(t()).define(["md"],mr),n.variable(t()).define(["md"],hr),n.variable(t("vl")).define("vl",["vegaVersion","vlVersion","apiVersion","tooltipVersion","require"],br),n.variable(t("apiVersion")).define("apiVersion",vr),n.variable(t("vlVersion")).define("vlVersion",gr),n.variable(t("vegaVersion")).define("vegaVersion",wr),n.variable(t("tooltipVersion")).define("tooltipVersion",yr),n.variable(t()).define(["md"],_r),n.variable(t("zip_codes")).define("zip_codes",["md"],kr),n.variable(t()).define(["vl","width"],xr),n.variable(t("interactive_weather")).define("interactive_weather",["md"],Ar),n.variable(t()).define(["vl","width"],Er),n.variable(t("population_pyramid")).define("population_pyramid",["md"],qr),n.variable(t()).define(["vl"],Sr),n.variable(t("bind_external")).define("bind_external",["md"],Tr);const r=e.module(fr);return n.import("Range",r),n.variable(t("viewof year")).define("viewof year",["Range"],Nr),n.variable(t("year")).define("year",["Generators","viewof year"],((e,t)=>e.input(t))),n.variable(t()).define(["vl","viewof year"],Ir),n.variable(t("dynamic_scatter")).define("dynamic_scatter",["md"],Lr),n.variable(t()).define(["vl"],Cr),n.variable(t("parallel_coordinats")).define("parallel_coordinats",["md"],jr),n.variable(t()).define(["vl","width"],Pr),n.variable(t("standalone_use")).define("standalone_use",["md","apiVersion"],Mr),n}function Dr(e){return e`# Data Visualization 2024 Final Project`}function $r(e){return e("d3@7")}function Or(e,t,n){return e(t("2020_student_behavior.csv"),{from:{table:"2020_student_behavior"},sort:[],slice:{to:null,from:null},filter:[],select:{columns:null}},n)}function Fr(e,t,n){return e(t("dep_weekly@2.csv"),{from:{table:"dep_weekly"},sort:[],slice:{to:null,from:null},filter:[],select:{columns:null}},n)}function Br(e,t,n){return e(t("2019_student_with_mental_health_interpolated.csv"),{from:{table:"2019_student_with_mental_health_interpolated"},sort:[],slice:{to:null,from:null},filter:[],select:{columns:null}},n)}function Vr(e,t,n){return e(t("2020_student_with_mental_health_interpolated.csv"),{from:{table:"2020_student_with_mental_health_interpolated"},sort:[],slice:{to:null,from:null},filter:[],select:{columns:null}},n)}function Ur(e,t,n){return e(t("2021_student_with_mental_health_interpolated.csv"),{from:{table:"2021_student_with_mental_health_interpolated"},sort:[],slice:{to:null,from:null},filter:[],select:{columns:null}},n)}function zr(e,t,n){return e(t("student_behavior_combined_with_mental_health_interpolated_drop_nan@3.csv"),{from:{table:"student_behavior_combined_with_mental_health_interpolated"},sort:[],slice:{to:null,from:null},filter:[],select:{columns:null}},n)}function Qr(e){return e}function Wr(e){function t(e){let t=e.date.getDay(),n=6-t;e.date.setDate(e.date.getDate()+n)}for(let n=0;n<e.length;n++)t(e[n]);return e}function Gr(e){return e}function Hr(e){return e.select(["2019","2020","2021"],{label:"Select one"})}function Yr(e,t,n,r){return 2019==e?t:2020==e?n:r}function Jr(e,t){return e.filter((e=>e.Year==t))}function Kr(e){return e.range([2019,2021],{label:"Year",step:1,value:2019})}function Zr(e){return e.select(["PANAS negative score","PANAS positive score","PHQ4 depression score","PHQ4 anxiety score"],{label:"Select one"})}function Xr(e,t,n,r){const a=e.selectPoint("hover").on("mouseover");t.value=a.value;const i=e.markLine().params(a).encode(e.detail().fieldN("pid"),e.tooltip().fieldN("pid"),e.color().if(e.or(a.empty(!1)),e.value("#0818A8")).value("gray"),e.opacity().if(e.or(a.empty(!1))).value(.1)),o=e.markText({dx:40,dy:-10,fontSize:15,fontWeight:"bold"}).transform(e.filter(e.or(a.empty(!1)))).encode(e.text().fieldN("pid")),s=e.layer(i,o).encode(e.y().fieldQ("negative_affect_EMA").title("PANAS Negative Affect Score"),e.color().datum("Student Line")),l=e.markLine({strokeDash:[8]}).transform(e.filter("isNaN(datum.positive_affect_EMA) == false"),e.groupby(["week","week_period"]).aggregate(e.average("negative_affect_EMA").as("mean_negative_score"))).encode(e.y().fieldQ("mean_negative_score"),e.color().datum("Average")),u=e.layer(l,s).data(n).title("Student PANAS Negative Mental Health score over the Weeks").config({fontSize:50}).encode(e.x().fieldQ("week").scale({domain:[1,14]}),e.color().scale({domain:["Average","Student Line"],range:["#000000","#0818A8"]})).width(1e3).height(600).config({background:null}).render(),c=e.markLine().params(a).encode(e.detail().fieldN("pid"),e.tooltip().fieldN("pid"),e.color().if(e.or(a.empty(!1)),e.value("#A020F0")).value("gray"),e.opacity().if(e.or(a.empty(!1))).value(.1)),d=e.markText({dx:40,dy:-10,fontSize:15,fontWeight:"bold"}).transform(e.filter(e.or(a.empty(!1)))).encode(e.text().fieldN("pid")),f=e.layer(c,d).encode(e.y().fieldQ("positive_affect_EMA").title("PANAS Positive Affect Score"),e.color().datum("Student Line")),p=e.markLine({strokeDash:[8]}).transform(e.filter("isNaN(datum.positive_affect_EMA) == false"),e.groupby(["week","week_period"]).aggregate(e.average("positive_affect_EMA").as("mean_positive_score"))).encode(e.y().fieldQ("mean_positive_score"),e.color().datum("Average")),m=e.layer(f,p).data(n).title("Student PANAS Positive Mental Health score over the Weeks").encode(e.x().fieldQ("week").scale({domain:[1,14]}),e.color().scale({domain:["Average","Student Line"],range:["#000000","#A020F0"]})).width(1e3).height(600).config({background:null}).render(),h=e.markLine().params(a).encode(e.detail().fieldN("pid"),e.tooltip().fieldN("pid"),e.color().if(e.or(a.empty(!1)),e.value("orange")).value("gray"),e.opacity().if(e.or(a.empty(!1))).value(.05)),b=e.markText({dx:40,dy:-10,fontSize:15,fontWeight:"bold"}).transform(e.filter(e.or(a.empty(!1)))).encode(e.text().fieldN("pid")),v=e.layer(h,b).encode(e.y().fieldQ("phq4_anxiety_EMA").title("PHQ4 Anxiety Score"),e.color().datum("Student Line")),g=e.markLine({strokeDash:[8]}).transform(e.filter("isNaN(datum.phq4_anxiety_EMA) == false"),e.groupby(["week","week_period"]).aggregate(e.average("phq4_anxiety_EMA").as("mean_anxiety_score"))).encode(e.y().fieldQ("mean_anxiety_score"),e.color().datum("Average")),w=e.layer(v,g).data(n).title("Student Anxiety PHQ4 Score over the Weeks").encode(e.x().fieldQ("week").scale({domain:[1,14]}),e.color().scale({domain:["Average","Student Line"],range:["#000000","orange"]})).width(1e3).height(600).config({background:null}).render(),y=e.markLine().data(n).params(a).encode(e.detail().fieldN("pid"),e.tooltip().fieldN("pid"),e.color().if(e.or(a.empty(!1)),e.value("#DB0000")).value("gray"),e.opacity().if(e.or(a.empty(!1))).value(.05)),_=e.markText({dx:40,dy:-10,fontSize:15,fontWeight:"bold"}).data(n).transform(e.filter(e.or(a.empty(!1)))).encode(e.text().fieldN("pid")),k=e.layer(y,_).data(n).title("Student Depression PHQ4 Score over the Weeks").encode(e.y().fieldQ("phq4_depression_EMA").title("PHQ4 Depression Score"),e.x().fieldQ("week").scale({domain:[1,14]}),e.color().datum("Student Line")),x=e.markLine({strokeDash:[8]}).transform(e.filter("isNaN(datum.phq4_depression_EMA) == false"),e.groupby(["week","week_period"]).aggregate(e.average("phq4_depression_EMA").as("mean_depression_score"))).encode(e.y().fieldQ("mean_depression_score"),e.color().datum("Average")),A=e.layer(x,k).data(n).encode(e.x().fieldQ("week").scale({domain:[1,14]}),e.color().scale({domain:["Average","Student Line"],range:["#000000","#DB0000"]})).width(1e3).height(600).config({background:null}).render();return"PANAS negative score"==r?u:"PANAS positive score"==r?m:"PHQ4 depression score"==r?A:w}function ea(e,t,n){const r=e.markLine().encode(e.color().value("orange")).width(500),a=e.markCircle().encode(e.tooltip(["Number of scores collected","mean_positive_score","week_period"]),e.color().value("black"),e.size().value("50")),i=e.markLine().encode(e.color().value("red")).width(500),o=e.markCircle().encode(e.tooltip(["Number of scores collected","mean_negative_score","week_period"]),e.color().value("black"),e.size().value("50")),s=e.markLine().encode(e.color().value("green")).width(500),l=e.markCircle().encode(e.tooltip(["Number of scores collected","depression_score","week_period"]),e.color().value("black"),e.size().value("50")),u=e.markLine().encode(e.color().value("blue")).width(500),c=e.markCircle().encode(e.tooltip(["Number of scores collected","anxiety_score","week_period"]),e.color().value("black"),e.size().value("50")),d=e.layer(r,a).title("Mean Positive Score Value over Quarter Weeks").encode(e.y().fieldQ("mean_positive_score").scale({domain:[0,10]}).title("Mean Attribute Value"),e.x().fieldO("week").axis({labelAngle:0})),f=e.layer(i,o).title("Mean Negative Score Value over Quarter Weeks").encode(e.y().fieldQ("mean_negative_score").scale({domain:[0,10]}).title("Mean Attribute Value"),e.x().fieldO("week").axis({labelAngle:0})),p=e.layer(s,l).title("Mean PHQ4 Depression Value over Quarter Weeks").encode(e.y().fieldQ("depression_score").scale({domain:[0,3]}).title("Mean Depression Value"),e.x().fieldO("week").axis({labelAngle:0})),m=e.layer(u,c).title("Mean PHQ4 Anxiety Value over Quarter Weeks").encode(e.y().fieldQ("anxiety_score").scale({domain:[0,3]}).title("Mean Anxiety Value"),e.x().fieldO("week").axis({labelAngle:0})),h=e.hconcat(d,f),b=e.hconcat(m,p),v=e.vconcat(h,b).data(t).transform(e.filter(`isNaN(datum.phq4_) == false && datum.Year == ${n}`),e.groupby(["week","week_period"]).aggregate(e.average("negative_affect_EMA").as("mean_negative_score"),e.average("positive_affect_EMA").as("mean_positive_score"),e.average("phq4_depression_EMA").as("depression_score"),e.average("phq4_anxiety_EMA").as("anxiety_score"),e.count().as("Number of scores collected"))).render();return v}function ta(e){return e}function na(e){return["All",...new Set(e.map((e=>e.pid)))]}function ra(e){return e.filter((e=>6==e.week))}function aa(e,t){return e.filter((e=>e.Year==t))}function ia(e){return e.range([2019,2021],{label:"Year",step:1,value:2019})}function oa(e,t){return e.select(t,{label:"Select participant",value:"All"})}function sa(e,t,n,r,a){let i;i=2021===e?t.filter((e=>2021==e.Year)):2020===e?t.filter((e=>2020==e.Year)):t.filter((e=>2019==e.Year));const o=r.selectPoint("select").init(1).fields("week").nearest(!0),s=r.markPoint().title("Effect of Total Steps on PANAS Positive Mental Health Score").transform(r.filter(o.empty(!1))).encode(r.x().fieldQ("f_steps:fitbit_steps_intraday_rapids_sumsteps:allday").title("Average steps in week"),r.y().fieldQ("positive_affect_EMA").title("PANAS Positive Score"),r.color().condition({test:`'${a}' == 'All' ? true : datum.pid ==='${a}'`,value:"#DB0000"}).value("gray"),r.opacity().condition({test:`'${a}' == 'All' ? true : datum.pid ==='${a}'`,value:"1"}).value(.3),r.size().value(80),r.tooltip(["pid",{field:"f_steps:fitbit_steps_intraday_rapids_sumsteps:allday",format:"0.2f",title:"Average Steps"},"positive_affect_EMA",{field:"f_loc:phone_locations_doryab_radiusgyration:allday",format:"0.2f",title:"Area covered"}])),l=r.markLine({strokeDash:[8]}).transform(r.filter(o.empty(!1)),r.regression("f_steps:fitbit_steps_intraday_rapids_sumsteps:allday").on("positive_affect_EMA")).encode(r.x().fieldQ("f_steps:fitbit_steps_intraday_rapids_sumsteps:allday"),r.y().fieldQ("positive_affect_EMA"),r.color().value("black")),u=r.layer(s,l).data(i).config({background:null,transition:500,continuousWidth:!0}).width(500).height(500).config({background:null}),c=r.markLine().encode(r.color().value("grey")),d=r.markCircle().params(o).encode(r.size().value("50"),r.color().if(o.empty(!1),r.value("red")).value("grey")),f=r.layer(c,d).data(i).title("Student Weekly Average Steps Over Time").transform(r.filter(`'${a}' == 'All' ? true : datum.pid ==='${a}'`),r.average("f_steps:fitbit_steps_intraday_rapids_sumsteps:allday").as("mean_average_steps")).encode(r.x().fieldQ("week"),r.y().fieldQ("f_steps:fitbit_steps_intraday_rapids_sumsteps:allday").title("Average steps in the week")).width(500).height(100).config({background:null}),p=r.vconcat(f,u).config({background:null}).render();return p}function la(e,t){const r=e.module();function a(){return this.url}const i=new Map([["2021_student_with_mental_health_interpolated.csv",{url:new URL(n(9350),n.b),mimeType:"text/csv",toString:a}],["2020_student_with_mental_health_interpolated.csv",{url:new URL(n(3227),n.b),mimeType:"text/csv",toString:a}],["2019_student_with_mental_health_interpolated.csv",{url:new URL(n(8181),n.b),mimeType:"text/csv",toString:a}],["2020_student_behavior.csv",{url:new URL(n(2586),n.b),mimeType:"text/csv",toString:a}],["dep_weekly@2.csv",{url:new URL(n(5419),n.b),mimeType:"text/csv",toString:a}],["student_behavior_combined_with_mental_health_interpolated_drop_nan@3.csv",{url:new URL(n(9523),n.b),mimeType:"text/csv",toString:a}]]);r.builtin("FileAttachment",e.fileAttachments((e=>i.get(e)))),r.variable(t()).define(["md"],Dr);const o=e.module(Rr);return r.import("vl",o),r.variable(t("d3")).define("d3",["require"],$r),r.variable(t("student_behavior_2020")).define("student_behavior_2020",["__query","FileAttachment","invalidation"],Or),r.variable(t("dep_weekly_2020")).define("dep_weekly_2020",["__query","FileAttachment","invalidation"],Fr),r.variable(t("s_m_h_2019")).define("s_m_h_2019",["__query","FileAttachment","invalidation"],Br),r.variable(t("s_m_h_2020")).define("s_m_h_2020",["__query","FileAttachment","invalidation"],Vr),r.variable(t("s_m_h_2021")).define("s_m_h_2021",["__query","FileAttachment","invalidation"],Ur),r.variable(t("total_interpolated")).define("total_interpolated",["__query","FileAttachment","invalidation"],zr),r.variable(t("mental_health_data_object")).define("mental_health_data_object",["dep_weekly_2020"],Qr),r.variable(t("filtered_MH_data_array")).define("filtered_MH_data_array",["mental_health_data_object"],Wr),r.variable(t("screen_time_data")).define("screen_time_data",["student_behavior_2020"],Gr),r.variable(t("viewof year_dropdown")).define("viewof year_dropdown",["Inputs"],Hr),r.variable(t("year_dropdown")).define("year_dropdown",["Generators","viewof year_dropdown"],((e,t)=>e.input(t))),r.variable(t("student_movement_array")).define("student_movement_array",["year_dropdown","s_m_h_2019","s_m_h_2020","s_m_h_2021"],Yr),r.variable(t("year_data")).define("year_data",["total_interpolated","year_range_def"],Jr),r.variable(t("viewof year_range_def")).define("viewof year_range_def",["Inputs"],Kr),r.variable(t("year_range_def")).define("year_range_def",["Generators","viewof year_range_def"],((e,t)=>e.input(t))),r.variable(t("viewof emotion_score")).define("viewof emotion_score",["Inputs"],Zr),r.variable(t("emotion_score")).define("emotion_score",["Generators","viewof emotion_score"],((e,t)=>e.input(t))),r.variable(t("first_plot")).define("first_plot",["vl","viewof participant_dropdown","year_data","emotion_score"],Xr),r.variable(t()).define(["vl","total_interpolated","year_range_def"],ea),r.variable(t("object")).define("object",["s_m_h_2020"],ta),r.variable(t("participant_num")).define("participant_num",["year_data_steps"],na),r.variable(t("filter_array_test")).define("filter_array_test",["s_m_h_2021"],ra),r.variable(t("year_data_steps")).define("year_data_steps",["total_interpolated","year_steps"],aa),r.variable(t("viewof year_steps")).define("viewof year_steps",["Inputs"],ia),r.variable(t("year_steps")).define("year_steps",["Generators","viewof year_steps"],((e,t)=>e.input(t))),r.variable(t("viewof participant_dropdown")).define("viewof participant_dropdown",["Inputs","participant_num"],oa),r.variable(t("participant_dropdown")).define("participant_dropdown",["Generators","viewof participant_dropdown"],((e,t)=>e.input(t))),r.variable(t("final_chart")).define("final_chart",["year_steps","total_interpolated","viewof participant_dropdown","vl","participant_dropdown"],sa),r}function ua(e){return e`# Introduction to inputs

These lightweight interface components — buttons, sliders, dropdowns, tables, and the like — help you explore data and build interactive displays. For a walkthrough of how you might use these to support data analysis, see [Hello, Inputs!](/@observablehq/hello-inputs)`}function ca(e){return e`---
## Usage

Declare your inputs with [viewof](/@observablehq/introduction-to-views), like so:`}function da(e){return e.range([0,11],{value:5,step:.1,label:"Gain"})}function fa(e){return e`Now you can reference the input’s value (here *gain*) in any cell, and the cell will run whenever the input changes. No event listeners required!`}function pa(e){return e}function ma(e,t){return t`The current gain is ${e.toFixed(1)}!`}function ha(e){return e`Observable Inputs are released under the [ISC license](https://github.com/observablehq/inputs/blob/main/LICENSE) and depend only on [Hypertext Literal](/@observablehq/htl), our tagged template literal for safely generating dynamic HTML. If you are interested in contributing or wish to report an issue, please see [our repository](https://github.com/observablehq/inputs). For recent changes, please see [our release notes](https://github.com/observablehq/inputs/releases).`}function ba(e){return e`---

## Basics

These basic inputs will get you started.

* [Button](/@observablehq/input-button) - do something when a button is clicked
* [Toggle](/@observablehq/input-toggle) - toggle between two values (on or off)
* [Checkbox](/@observablehq/input-checkbox) - choose any from a set
* [Radio](/@observablehq/input-radio) - choose one from a set
* [Range](/@observablehq/input-range) or [Number](/@observablehq/input-range) - choose a number in a range (slider)
* [Select](/@observablehq/input-select) - choose one or any from a set (drop-down menu)
* [Text](/@observablehq/input-text) - enter freeform single-line text
* [Textarea](/@observablehq/input-textarea) - enter freeform multi-line text
* [Date](/@observablehq/input-date) or [Datetime](/@observablehq/input-date) - choose a date
* [Color](/@observablehq/input-color) - choose a color
* [File](/@observablehq/input-file) - choose a local file`}function va(e){return e`---

### [Button](/@observablehq/input-button) 

Do something when a button is clicked. [Examples ›](/@observablehq/input-button) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#button)`}function ga(e){return e.button("Click me")}function wa(e){return e}function ya(e){return e`---

### [Toggle](/@observablehq/input-toggle) 

Toggle between two values (on or off). [Examples ›](/@observablehq/input-toggle) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#toggle)`}function _a(e){return e.toggle({label:"Mute"})}function ka(e){return e}function xa(e){return e`---

### [Checkbox](/@observablehq/input-checkbox) 

Choose any from a set. [Examples ›](/@observablehq/input-checkbox) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#checkbox)`}function Aa(e){return e.checkbox(["salty","sweet","bitter","sour","umami"],{label:"Flavors"})}function Ea(e){return e}function qa(e){return e`---

### [Radio](/@observablehq/input-radio)

Choose one from a set. [Examples ›](/@observablehq/input-radio) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#radio)`}function Sa(e){return e.radio(["salty","sweet","bitter","sour","umami"],{label:"Flavor"})}function Ta(e){return e}function Na(e){return e`---

### [Range](/@observablehq/input-range)

Pick a number. [Examples ›](/@observablehq/input-range) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#range)`}function Ia(e){return e.range([0,255],{step:1,label:"Favorite number"})}function La(e){return e}function Ca(e){return e`---

### [Select](/@observablehq/input-select)

Choose one, or any, from a menu. [Examples ›](/@observablehq/input-select) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#select)`}function ja(e,t){return e.select([null].concat(t),{label:"Home state"})}function Pa(e){return e}function Ma(e,t){return e.select(t,{label:"Visited states",multiple:!0})}function Ra(e){return e}function Da(e){return e`---

### [Text](/@observablehq/input-text)

Enter freeform single-line text. [Examples ›](/@observablehq/input-text) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#text)`}function $a(e){return e.text({label:"Name",placeholder:"What’s your name?"})}function Oa(e){return e}function Fa(e){return e`---

### [Textarea](/@observablehq/input-textarea)

Enter freeform multi-line text. [Examples ›](/@observablehq/input-textarea) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#textarea)`}function Ba(e){return e.textarea({label:"Biography",placeholder:"What’s your story?"})}function Va(e){return e}function Ua(e){return e`---

### [Date](/@observablehq/input-date)

Choose a date, or a date and time. [Examples ›](/@observablehq/input-date) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#date)`}function za(e){return e.date({label:"Birthday"})}function Qa(e){return e}function Wa(e){return e`---

### [Color](/@observablehq/input-color)

Choose a color. [Examples ›](/@observablehq/input-color) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#color)`}function Ga(e){return e.color({label:"Favorite color",value:"#4682b4"})}function Ha(e){return e}function Ya(e){return e`---

### [File](/@observablehq/input-file)

Choose a local file. [Examples ›](/@observablehq/input-file) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#file)`}function Ja(e){return e.file({label:"CSV file",accept:".csv",required:!0})}function Ka(e){return e.csv({typed:!0})}function Za(e){return e`---

## Tabular data

These fancy inputs are designed to work with tabular data such as CSV or TSV [file attachments](/@observablehq/file-attachments) and [database clients](/@observablehq/databases).

* [Search](/@observablehq/input-search) - query a tabular dataset
* [Table](/@observablehq/input-table) - browse a tabular dataset`}function Xa(e){return e`---

### [Search](/@observablehq/input-search)

Query a tabular dataset. [Examples ›](/@observablehq/input-search) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#search)`}function ei(e,t){return e.search(t,{placeholder:"Search U.S. capitals"})}function ti(e){return e}function ni(e){return e`---

### [Table](/@observablehq/input-table)

Browse a tabular dataset. [Examples ›](/@observablehq/input-table) [API Reference ›](https://github.com/observablehq/inputs/blob/main/README.md#table)`}function ri(e,t){return e.table(t)}function ai(e){return e}function ii(e){return e`---

## And more!

Got the basics? Here are a few more advanced techniques:

* [Form](https://observablehq.com/@observablehq/input-form?collection=@observablehq/inputs) - combine multiple inputs for a compact display
* [Synchronized inputs](https://observablehq.com/@observablehq/synchronized-inputs?collection=@observablehq/inputs) - bind two or more inputs
* [Introduction to Views](/@observablehq/introduction-to-views) - more on Observable’s viewof`}function oi(e){return e`We are grateful to Jeremy Ashkenas for blazing the trail with [“The Grand Native Inputs Bazaar”](/@jashkenas/inputs). To migrate from Jeremy’s inputs to our new official inputs, consider our [legacy inputs](/@observablehq/legacy-inputs).`}function si(e){return e`For even more, consider these “friends & family” inputs and techniques shared by the Observable community:`}function li(e,t){return e.table([[["2D Slider","/d/98bbb19bf9e859ee"],"Fabian Iwand","a two-dimensional range"],[["Binary Input","/@rreusser/binary-input"],"Ricky Reusser","bitwise IEEE floating point"],[["DIY inputs","/@bartok32/diy-inputs"],"Bartosz Prusinowski","inputs with fun, custom styles"],[["FineRange","/@rreusser/fine-range"],"Ricky Reusser","high-precision numeric control"],[["Form Input","/@mbostock/form-input"],"Mike Bostock","multiple inputs in single cell"],[["Inputs","/@jashkenas/inputs"],"Jeremy Ashkenas","the original"],[["Player","/@oscar6echo/player"],"oscar6echo","detailed timing control for animation"],[["Scrubber","/@mbostock/scrubber"],"Mike Bostock","play/pause/scrub control for animation"],[["Range Slider","/@mootari/range-slider"],"Fabian Iwand","a two-ended range"],[["Ternary Slider","/@yurivish/ternary-slider"],"Yuri Vishnevsky","a proportion of three values"],[["Data driven range sliders","/@bumbeishvili/data-driven-range-sliders"],"David B.","a range input with a histogram"],[["Snapping Histogram Slider","/@trebor/snapping-histogram-slider"],"Robert Harris","a range input with a histogram"],[["Inputs in grid","/@bumbeishvili/input-groups"],"David B.","combine multiple inputs into a compact grid"],[["List Input","/@harrislapiroff/list-input"],"Harris L.","enter more than one of something"],[["Copier","/@mbostock/copier"],"Mike Bostock","a button to copy to the clipboard"],[["Tangle","/@mbostock/tangle"],"Mike Bostock","Bret Victor-inspired inline scrubbable numbers"],[["Editor","/@cmudig/editor"],"CMU Data Interaction Group","code editor with syntax highlighting"],[["Color Scheme Picker","/@zechasault/color-schemes-and-interpolators-picker"],"Zack Ciminera","pick a D3 color scheme"],[["Easing Curve Editor","/@nhogs/easing-graphs-editor"],"Nhogs","create a custom easing curve"]].map((([e,t,n])=>({Name:e,Author:t,Description:n}))),{sort:"Name",rows:1/0,layout:"auto",width:{Description:"60%"},format:{Name:([e,n])=>t`<a href=${n} target=_blank>${e}`}})}function ui(e){return e`To share your reusable input or technique, please leave a comment.`}function ci(e){return e`---

## Appendix`}function di(e){return e("us-state-capitals.tsv").tsv({typed:!0})}function fi(e){return e.map((e=>e.State))}function pi(e){return e`The cells below provide deprecated aliases for older versions of Inputs. Please use Inputs.button *etc.* instead of importing from this notebook.`}function mi(e){return e.button}function hi(e){return e.toggle}function bi(e){return e.radio}function vi(e){return e.checkbox}function gi(e){return e.range}function wi(e){return e.select}function yi(e){return e.text}function _i(e){return e.textarea}function ki(e){return e.search}function xi(e){return e.table}function Ai(e){return e.input}function Ei(e){return e.bind}function qi(e){return e.disposal}function Si(e){return e.svg}function Ti(e){return e.html}function Ni(e,t){const r=e.module();function a(){return this.url}const i=new Map([["us-state-capitals.tsv",{url:new URL(n(7542),n.b),mimeType:"text/tab-separated-values",toString:a}]]);return r.builtin("FileAttachment",e.fileAttachments((e=>i.get(e)))),r.variable(t()).define(["md"],ua),r.variable(t("usage")).define("usage",["md"],ca),r.variable(t("viewof gain")).define("viewof gain",["Inputs"],da),r.variable(t("gain")).define("gain",["Generators","viewof gain"],((e,t)=>e.input(t))),r.variable(t("now")).define("now",["md"],fa),r.variable(t("gain2")).define("gain2",["gain"],pa),r.variable(t("currentgain")).define("currentgain",["gain","md"],ma),r.variable(t()).define(["md"],ha),r.variable(t("basics")).define("basics",["md"],ba),r.variable(t("button")).define("button",["md"],va),r.variable(t("viewof clicks")).define("viewof clicks",["Inputs"],ga),r.variable(t("clicks")).define("clicks",["Generators","viewof clicks"],((e,t)=>e.input(t))),r.variable(t()).define(["clicks"],wa),r.variable(t("toggle")).define("toggle",["md"],ya),r.variable(t("viewof mute")).define("viewof mute",["Inputs"],_a),r.variable(t("mute")).define("mute",["Generators","viewof mute"],((e,t)=>e.input(t))),r.variable(t()).define(["mute"],ka),r.variable(t("checkbox")).define("checkbox",["md"],xa),r.variable(t("viewof flavors")).define("viewof flavors",["Inputs"],Aa),r.variable(t("flavors")).define("flavors",["Generators","viewof flavors"],((e,t)=>e.input(t))),r.variable(t()).define(["flavors"],Ea),r.variable(t("radio")).define("radio",["md"],qa),r.variable(t("viewof flavor")).define("viewof flavor",["Inputs"],Sa),r.variable(t("flavor")).define("flavor",["Generators","viewof flavor"],((e,t)=>e.input(t))),r.variable(t()).define(["flavor"],Ta),r.variable(t("range")).define("range",["md"],Na),r.variable(t("viewof n")).define("viewof n",["Inputs"],Ia),r.variable(t("n")).define("n",["Generators","viewof n"],((e,t)=>e.input(t))),r.variable(t()).define(["n"],La),r.variable(t("select")).define("select",["md"],Ca),r.variable(t("viewof homeState")).define("viewof homeState",["Inputs","stateNames"],ja),r.variable(t("homeState")).define("homeState",["Generators","viewof homeState"],((e,t)=>e.input(t))),r.variable(t()).define(["homeState"],Pa),r.variable(t("viewof visitedStates")).define("viewof visitedStates",["Inputs","stateNames"],Ma),r.variable(t("visitedStates")).define("visitedStates",["Generators","viewof visitedStates"],((e,t)=>e.input(t))),r.variable(t()).define(["visitedStates"],Ra),r.variable(t()).define(["md"],Da),r.variable(t("viewof name")).define("viewof name",["Inputs"],$a),r.variable(t("name")).define("name",["Generators","viewof name"],((e,t)=>e.input(t))),r.variable(t()).define(["name"],Oa),r.variable(t()).define(["md"],Fa),r.variable(t("viewof bio")).define("viewof bio",["Inputs"],Ba),r.variable(t("bio")).define("bio",["Generators","viewof bio"],((e,t)=>e.input(t))),r.variable(t()).define(["bio"],Va),r.variable(t()).define(["md"],Ua),r.variable(t("viewof birthday")).define("viewof birthday",["Inputs"],za),r.variable(t("birthday")).define("birthday",["Generators","viewof birthday"],((e,t)=>e.input(t))),r.variable(t()).define(["birthday"],Qa),r.variable(t()).define(["md"],Wa),r.variable(t("viewof color")).define("viewof color",["Inputs"],Ga),r.variable(t("color")).define("color",["Generators","viewof color"],((e,t)=>e.input(t))),r.variable(t()).define(["color"],Ha),r.variable(t()).define(["md"],Ya),r.variable(t("viewof file")).define("viewof file",["Inputs"],Ja),r.variable(t("file")).define("file",["Generators","viewof file"],((e,t)=>e.input(t))),r.variable(t("data")).define("data",["file"],Ka),r.variable(t("tables")).define("tables",["md"],Za),r.variable(t()).define(["md"],Xa),r.variable(t("viewof search")).define("viewof search",["Inputs","capitals"],ei),r.variable(t("search")).define("search",["Generators","viewof search"],((e,t)=>e.input(t))),r.variable(t()).define(["search"],ti),r.variable(t()).define(["md"],ni),r.variable(t("viewof rows")).define("viewof rows",["Inputs","search"],ri),r.variable(t("rows")).define("rows",["Generators","viewof rows"],((e,t)=>e.input(t))),r.variable(t()).define(["rows"],ai),r.variable(t("techniques")).define("techniques",["md"],ii),r.variable(t()).define(["md"],oi),r.variable(t()).define(["md"],si),r.variable(t()).define(["Inputs","html"],li),r.variable(t()).define(["md"],ui),r.variable(t()).define(["md"],ci),r.variable(t("capitals")).define("capitals",["FileAttachment"],di),r.variable(t("stateNames")).define("stateNames",["capitals"],fi),r.variable(t()).define(["md"],pi),r.variable(t("Button")).define("Button",["Inputs"],mi),r.variable(t("Toggle")).define("Toggle",["Inputs"],hi),r.variable(t("Radio")).define("Radio",["Inputs"],bi),r.variable(t("Checkbox")).define("Checkbox",["Inputs"],vi),r.variable(t("Range")).define("Range",["Inputs"],gi),r.variable(t("Select")).define("Select",["Inputs"],wi),r.variable(t("Text")).define("Text",["Inputs"],yi),r.variable(t("Textarea")).define("Textarea",["Inputs"],_i),r.variable(t("Search")).define("Search",["Inputs"],ki),r.variable(t("Table")).define("Table",["Inputs"],xi),r.variable(t("Input")).define("Input",["Inputs"],Ai),r.variable(t("bind")).define("bind",["Inputs"],Ei),r.variable(t("disposal")).define("disposal",["Inputs"],qi),r.variable(t("svg")).define("svg",["htl"],Si),r.variable(t("html")).define("html",["htl"],Ti),r}function Ii(e){return e`# Vega-Lite API v5`}function Li(e){return e`The [Vega-Lite JavaScript API](https://github.com/vega/vega-lite-api/) provides a convenient way to write [Vega-Lite](https://vega.github.io/vega-lite) specifications in a programmatic fashion. Scroll down for some usage examples, or browse the [Vega-Lite API example collection](https://observablehq.com/collection/@vega/vega-lite-api)! 

_This notebook uses **version 5** of Vega-Lite and the corresponding Vega-Lite API v5._ To see what's new in version 5, [have a look at the changelog](https://github.com/vega/vega-lite/releases/tag/v5.0.0). To use Vega-Lite version 4, see the [Vega-Lite API v4 notebook](https://observablehq.com/@vega/vega-lite-api) instead.

Want to learn more about data visualization and how to use the Vega-Lite API? Read the [introduction to Vega-Lite](https://observablehq.com/@uwdata/introduction-to-vega-lite) and the [data visualization curriculum](https://observablehq.com/@uwdata/data-visualization-curriculum?collection=@uwdata/visualization-curriculum).`}function Ci(e){return e`
The cell below imports the Vega-Lite API and registers the desired versions of Vega and Vega-Lite, along with default [Vega View options](https://vega.github.io/vega/docs/api/view/#view) and [Vega-Lite configuration](https://vega.github.io/vega-lite/docs/config.html):
`}async function ji(e,t,n,r,a){const[i,o,s,l]=await Promise.all([`vega@${e}`,`vega-lite@${t}`,`vega-lite-api@${n}`,`vega-tooltip@${r}`].map((e=>a(e)))),u={config:{config:{view:{continuousWidth:400,continuousHeight:300},mark:{tooltip:null}}},init:e=>{e.tooltip((new l.Handler).call),e.container()&&(e.container().style["overflow-x"]="auto")},view:{loader:i.loader({baseURL:"https://cdn.jsdelivr.net/npm/vega-datasets@2/"}),renderer:"canvas"}};return s.register(i,o,u)}function Pi(){return"5.6.0"}function Mi(){return"5.6.0"}function Ri(){return"5.23.0"}function Di(){return"0.30.0"}function $i(e){return e`To use the same setup in your own notebooks, add a cell with the following code:
~~~ js
import {vl} from '@vega/vega-lite-api-v5'
~~~
To use the API outside of Observable, see the [stand-alone usage instructions](#standalone_use) below.
`}function Oi(e){return e`<hr/>
## Zip Codes

A dot for each zip code in the United States, colored by the first digit.
`}function Fi(e,t){return e.markSquare({size:2,opacity:1}).data("data/zipcodes.csv").transform(e.calculate("substring(datum.zip_code, 0, 1)").as("digit")).project(e.projection("albersUsa")).encode(e.longitude().fieldQ("longitude"),e.latitude().fieldQ("latitude"),e.color().fieldN("digit")).width(t).height(Math.floor(t/1.75)).autosize({type:"fit-x",contains:"padding"}).config({view:{stroke:null}}).render()}function Bi(e){return e`<hr/>
## Interactive Seattle Weather 2012-2015

A scatter plot and summary histogram with linked selections between plots to perform cross-filtering and configure conditional color encodings.
`}function Vi(e,t){const n=e.selectInterval().encodings("x"),r=e.selectPoint().encodings("color"),a={domain:["sun","fog","drizzle","rain","snow"],range:["#e7ba52","#a7a7a7","#aec7e8","#1f77b4","#9467bd"]},i=e.markPoint({filled:!0}).encode(e.color().value("lightgray").if(n,e.color().fieldN("weather").scale(a).title("Weather")),e.size().fieldQ("precipitation").scale({domain:[-1,50],range:[10,500]}).title("Precipitation"),e.order().fieldQ("precipitation").sort("descending"),e.x().timeMD("date").axis({title:"Date",format:"%b"}),e.y().fieldQ("temp_max").scale({domain:[-5,40]}).axis({title:"Maximum Daily Temperature (°C)"})).width(t).height(300).params(n).transform(e.filter(r)),o=e.markBar().encode(e.color().if(r,e.color().fieldN("weather")).value("lightgray").scale(a).title("Weather"),e.x().count(),e.y().fieldN("weather").scale({domain:a.domain}).title("Weather")).width(t).params(r).transform(e.filter(n));return e.vconcat(i,o).data("data/seattle-weather.csv").autosize({type:"fit-x",contains:"padding"}).render()}function Ui(e){return e`<hr/>
## Population Pyramid

A [population pyramid](https://en.wikipedia.org/wiki/Population_pyramid) shows the distribution of age groups in a population. Drag the slider to see the U.S. change over time, but watch out for [missing data in 1890!](https://www.census.gov/history/www/faqs/genealogy_faqs/why_cant_i_find_1890_census_records.html) The slider is generated internally by binding the \`Year\` parameter using \`vl.slider()\`.`}function zi(e){return e.markBar({opacity:.4}).params(e.param("Year").value(2e3).bind(e.slider(1850,2e3,10))).data("data/population.json").transform(e.calculate('datum.sex === 1 ? "Male" : "Female"').as("sex"),e.filter("datum.year === Year")).encode(e.x().sum("people").scale({domain:[0,12e6]}).stack(null).title("People"),e.y().fieldO("age").sort("descending").title("Age"),e.color().fieldN("sex").scale({range:["#675193","#ca8861"]}).title("Sex")).height(300).render()}function Qi(e){return e`### Bind Parameters to External Inputs

As an alternative to having Vega-Lite generate its own input widgets (as with \`vl.slider()\` above), we can also directly bind a Vega-Lite parameter to an existing widget, such as Observable's \`Range\` component:`}function Wi(e){return e([1850,2e3],{step:10,value:2e3})}function Gi(e,t){return e.markBar({opacity:.4}).params(e.param("Year").bind(t)).data("data/population.json").transform(e.calculate('datum.sex === 1 ? "Male" : "Female"').as("sex"),e.filter("datum.year === Year")).encode(e.x().sum("people").scale({domain:[0,12e6]}).stack(null).title("People"),e.y().fieldO("age").sort("descending").title("Age"),e.color().fieldN("sex").scale({range:["#675193","#ca8861"]}).title("Sex")).height(300).render()}function Hi(e){return e`<hr/>
## Dynamic Query Scatter Plot

A scatter plot of automobile mileage and horsepower. (Shift-)Click the legend and drag the slider to filter by Origin and Year.`}function Yi(e){const t=e.selectPoint("isOrigin").fields("Origin").bind("legend"),n=e.selectPoint("isYear").fields("Year").value(1970).bind(e.slider(1970,1980,1).name("Year")),r=e.and(t,n);return e.markCircle().data("data/cars.json").transform(e.calculate("year(datum.Year)").as("Year")).params(t,n).encode(e.x().fieldQ("Horsepower"),e.y().fieldQ("Miles_per_Gallon"),e.color().if(r,e.color().fieldN("Origin")).value("grey"),e.opacity().if(r,e.value(1)).value(.2)).render()}function Ji(e){return e`<hr/>
## Parallel Coordinates

A [parallel coordinates plot](https://en.wikipedia.org/wiki/Parallel_coordinates) that uses \`window\` and \`fold\` transforms to convert the four dimensions of penguin measurements into normalized coordinates that can be visualized as \`line\` marks. The graphic includes an additional layer with custom \`text\` mark labels for the parallel axis grid lines. We render the plot as SVG by passing \`{renderer:'svg'}\` to the \`render\` method.
`}function Ki(e,t){const n=["Beak Length (mm)","Beak Depth (mm)","Flipper Length (mm)","Body Mass (g)"],r={type:"point",padding:0},a={domain:!1,ticks:!1,title:!1,grid:!0,gridColor:"#888",labelAngle:0,labelPadding:8,labelFontWeight:"bold"},i=e.markLine({strokeWidth:1.5,opacity:.5}).encode(e.color().fieldN("Species").sort("descending"),e.detail().fieldN("index"),e.x().fieldO("key").scale(r).axis(a),e.y().fieldQ("fraction").axis(null)),o=e.markText({dx:-2,align:"right",baseline:"middle"}).transform(e.groupby("key").aggregate(e.min("value").as("min"),e.max("value").as("max")),e.fold("min","max").as("op","value"),e.groupby("key").window(e.percent_rank("value").as("fraction"))).encode(e.x().fieldN("key"),e.y().fieldQ("fraction").axis(null),e.text().field("value").format(",")),s=e.layer(i,o).data("data/penguins.json").transform(e.filter('datum["Beak Length (mm)"] != null'),e.window(e.row_number().as("index")),e.fold(n).as("key","value"),e.groupby("key").join(e.min("value").as("min"),e.max("value").as("max")),e.calculate("(datum.value - datum.min) / (datum.max - datum.min)").as("fraction")).width(t).height(300).autosize({type:"fit-x",contains:"padding"});return s.render({renderer:"svg"})}function Zi(e,t){return e`<hr/>
## Stand-Alone Usage in a Web Browser

To use the Vega-Lite API in the browser outside of Observable, you need to include all the dependencies, set the default configuration, and then register the Vega libraries. Here is some starting code to build from:

~~~html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite-api@${t}"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-tooltip"></script>
  </head>
  <body>
    <div id="view"></div>

    <script>
      // setup API options
      const options = {
        config: {
          // Vega-Lite default configuration
        },
        init: (view) => {
          // initialize tooltip handler
          view.tooltip(new vegaTooltip.Handler().call);
        },
        view: {
          // view constructor options
          // remove the loader if you don't want to default to vega-datasets!
          loader: vega.loader({
            baseURL: "https://cdn.jsdelivr.net/npm/vega-datasets@2/",
          }),
          renderer: "canvas",
        },
      };

      // register vega and vega-lite with the API
      vl.register(vega, vegaLite, options);

      // now you can use the API!
      vl.markBar({ tooltip: true })
        .data([
          { a: "A", b: 28 }, { a: "B", b: 55 }, { a: "C", b: 43 },
          { a: "D", b: 91 }, { a: "E", b: 81 }, { a: "F", b: 53 },
          { a: "G", b: 19 }, { a: "H", b: 87 }, { a: "I", b: 52 },
        ])
        .encode(
          vl.x().fieldQ("b"),
          vl.y().fieldN("a"),
          vl.tooltip([vl.fieldQ("b"), vl.fieldN("a")])
        )
        .render()
        .then(viewElement => {
          // render returns a promise to a DOM element containing the chart
          // viewElement.value contains the Vega View object instance
          document.getElementById('view').appendChild(viewElement);
        });
    </script>
  </body>
</html>

~~~`}function Xi(e,t){const n=e.module();n.variable(t()).define(["md"],Ii),n.variable(t()).define(["md"],Li),n.variable(t()).define(["md"],Ci),n.variable(t("vl")).define("vl",["vegaVersion","vlVersion","apiVersion","tooltipVersion","require"],ji),n.variable(t("apiVersion")).define("apiVersion",Pi),n.variable(t("vlVersion")).define("vlVersion",Mi),n.variable(t("vegaVersion")).define("vegaVersion",Ri),n.variable(t("tooltipVersion")).define("tooltipVersion",Di),n.variable(t()).define(["md"],$i),n.variable(t("zip_codes")).define("zip_codes",["md"],Oi),n.variable(t()).define(["vl","width"],Fi),n.variable(t("interactive_weather")).define("interactive_weather",["md"],Bi),n.variable(t()).define(["vl","width"],Vi),n.variable(t("population_pyramid")).define("population_pyramid",["md"],Ui),n.variable(t()).define(["vl"],zi),n.variable(t("bind_external")).define("bind_external",["md"],Qi);const r=e.module(Ni);return n.import("Range",r),n.variable(t("viewof year")).define("viewof year",["Range"],Wi),n.variable(t("year")).define("year",["Generators","viewof year"],((e,t)=>e.input(t))),n.variable(t()).define(["vl","viewof year"],Gi),n.variable(t("dynamic_scatter")).define("dynamic_scatter",["md"],Hi),n.variable(t()).define(["vl"],Yi),n.variable(t("parallel_coordinats")).define("parallel_coordinats",["md"],Ji),n.variable(t()).define(["vl","width"],Ki),n.variable(t("standalone_use")).define("standalone_use",["md","apiVersion"],Zi),n}function eo(e){return e`# Assignment 3 Attempt`}function to(e){return e("student_behavior_all_years.csv").csv()}function no(e){return e.filter((e=>""!=e["f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night"]&&""!=e["f_screen:phone_screen_rapids_sumdurationunlock:allday"]&&""!=e["f_screen:phone_screen_rapids_sumdurationunlock:night"]&&""!=e["f_screen:phone_screen_rapids_sumdurationunlock:morning"]&&""!=e["f_screen:phone_screen_rapids_sumdurationunlock:afternoon"]&&""!=e["f_screen:phone_screen_rapids_sumdurationunlock:evening"]))}function ro(e){return e.select(["2018","2019","2020","2021"],{label:"Select a year"})}function ao(e,t){return e.filter((e=>e.Year==t))}function io(e,t){const n=e.selectInterval(),r=e.markPoint().title("student phone usage all day over 12 week quarter").params(n).encode(e.x().fieldO("week_period"),e.y().fieldQ("f_screen:phone_screen_rapids_sumdurationunlock:allday").title("student phone usage in minutes")).height(250).width(650),a=e.markCircle().title("Morning Phone Usage").transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:morning").as("average_morn_unlock_time"))).encode(e.x().fieldQ("average_morn_unlock_time").scale({domain:[0,360]}).title("average unlock time by student in minutes"),e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}).title("average sleep time by student in minutes"),e.tooltip([{title:"Student Identifier",field:"pid"},{title:"Average Unlock Time",field:"average_morn_unlock_time"},{title:"Average Sleep Time",field:"average_sleep_time"}]),e.stroke().value("#000000"),e.strokeWidth().value(.2)),i=e.markLine().transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:morning").as("average_morn_unlock_time")),e.regression("average_sleep_time").on("average_morn_unlock_time")).encode(e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}),e.x().fieldQ("average_morn_unlock_time").scale({domain:[0,360]}),e.color().value("red")),o=e.layer(a,i).width(300).height(200),s=e.markCircle().title("Afternoon Phone Usage").transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:afternoon").as("average_after_unlock_time"))).encode(e.x().fieldQ("average_after_unlock_time").scale({domain:[0,360]}).title("average unlock time by student in minutes"),e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}).title("average sleep time by student in minutes"),e.tooltip([{title:"Student Identifier",field:"pid"},{title:"Average Unlock Time",field:"average_after_unlock_time"},{title:"Average Sleep Time",field:"average_sleep_time"}]),e.stroke().value("#000000"),e.strokeWidth().value(.2)),l=e.markLine().transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:afternoon").as("average_after_unlock_time")),e.regression("average_sleep_time").on("average_after_unlock_time")).encode(e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}),e.x().fieldQ("average_after_unlock_time").scale({domain:[0,360]}),e.color().value("red")),u=e.layer(s,l).width(300).height(200),c=e.markCircle().title("Evening Phone Usage").transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:evening").as("average_evening_unlock_time"))).encode(e.x().fieldQ("average_evening_unlock_time").scale({domain:[0,360]}).title("average unlock time by student in minutes"),e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}).title("average sleep time by student in minutes"),e.tooltip([{title:"Student Identifier",field:"pid"},{title:"Average Unlock Time",field:"average_evening_unlock_time"},{title:"Average Sleep Time",field:"average_sleep_time"}]),e.stroke().value("#000000"),e.strokeWidth().value(.2)),d=e.markLine().transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:evening").as("average_evening_unlock_time")),e.regression("average_sleep_time").on("average_evening_unlock_time")).encode(e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}),e.x().fieldQ("average_evening_unlock_time").scale({domain:[0,360]}),e.color().value("red")),f=e.layer(c,d).width(300).height(200),p=e.markCircle().title("Night Phone Usage").transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:night").as("average_night_unlock_time"))).encode(e.x().fieldQ("average_night_unlock_time").scale({domain:[0,360]}).title("average unlock time by student in minutes"),e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}).title("average sleep time by student in minutes"),e.tooltip([{title:"Student Identifier",field:"pid"},{title:"Average Unlock Time",field:"average_night_unlock_time"},{title:"Average Sleep Time",field:"average_sleep_time"}]),e.stroke().value("#000000"),e.strokeWidth().value(.2)),m=e.markLine().transform(e.filter(n),e.groupby("pid").aggregate(e.average("f_slp:fitbit_sleep_intraday_rapids_sumdurationasleepunifiedmain:night").as("average_sleep_time"),e.average("f_screen:phone_screen_rapids_sumdurationunlock:night").as("average_night_unlock_time")),e.regression("average_sleep_time").on("average_night_unlock_time")).encode(e.y().fieldQ("average_sleep_time").scale({domain:[0,360]}),e.x().fieldQ("average_night_unlock_time").scale({domain:[0,360]}),e.color().value("red")),h=e.layer(p,m).width(300).height(200),b=e.vconcat(e.hconcat(o,u),e.hconcat(f,h)).config({padding:"50"}).title({text:"student average screen time during different time periods affect on average night sleep scores",fontSize:"15"});return e.vconcat(r,b).config({background:null}).data(t).render()}function oo(e,t){const r=e.module();function a(){return this.url}const i=new Map([["student_behavior_all_years.csv",{url:new URL(n(9458),n.b),mimeType:"text/csv",toString:a}]]);r.builtin("FileAttachment",e.fileAttachments((e=>i.get(e)))),r.variable(t()).define(["md"],eo);const o=e.module(Xi);return r.import("vl",o),r.variable(t("student_behavior_all_years")).define("student_behavior_all_years",["FileAttachment"],to),r.variable(t("filtered_students_night_sleep")).define("filtered_students_night_sleep",["student_behavior_all_years"],no),r.variable(t("viewof year_drop_down")).define("viewof year_drop_down",["Inputs"],ro),r.variable(t("year_drop_down")).define("year_drop_down",["Generators","viewof year_drop_down"],((e,t)=>e.input(t))),r.variable(t("filtered_students_year")).define("filtered_students_year",["filtered_students_night_sleep","year_drop_down"],ao),r.variable(t("student_phone")).define("student_phone",["vl","filtered_students_year"],io),r}var so={name:"Note-book",components:{sectionContainer:zt.A},setup(){const e=(0,b.KR)(null),t=(0,b.KR)(null),n=(0,b.KR)(null),a=(0,b.KR)(null),i=(0,b.KR)(null),o=(0,b.KR)(null),s=(0,b.KR)(null),l=(0,b.KR)(null);let u;return(0,r.sV)((()=>{u=new At,u.module(la,(r=>"viewof emotion_score"===r?new Ce(t.value):"first_plot"===r?new Ce(n.value):"viewof year_range_def"===r?new Ce(e.value):"viewof year_steps"===r?new Ce(a.value):"viewof participant_dropdown"===r?new Ce(i.value):"final_chart"===r?new Ce(o.value):["year_data","year_data_steps","participant_num"].includes(r))),u.module(oo,(e=>"viewof year_drop_down"===e?new Ce(s.value):"student_phone"===e?new Ce(l.value):["filtered_students_year"].includes(e)));const r=n.value;r&&(r.addEventListener("mouseover",(e=>{console.log("Hover event on the first plot:",e)})),r.addEventListener("click",(e=>{console.log("Click event on the first plot:",e)})));let c=document.getElementsByClassName("canvas.marks");console.log(c)})),(0,r.xo)((()=>{u&&u.dispose()})),{viewofYear_range:e,viewofEmotion_score:t,first_plot:n,viewofYear_steps:a,viewofParticipant_dropdown:i,final_chart:o,viewofYear_drop_down:s,student_phone:l}}},lo=n(1241);const uo=(0,lo.A)(so,[["render",h],["__scopeId","data-v-dbc7be36"]]);var co=uo},9458:function(e,t,n){"use strict";e.exports=n.p+"c17a0866eb52ab18.csv"},7542:function(e,t,n){"use strict";e.exports=n.p+"83738881ebf72ceb.tsv"},3227:function(e,t,n){"use strict";e.exports=n.p+"4902bcbbf3841fcd.csv"},9350:function(e,t,n){"use strict";e.exports=n.p+"8fe2e4904cea171d.csv"},8181:function(e,t,n){"use strict";e.exports=n.p+"f612e72bc9547a5e.csv"},5419:function(e,t,n){"use strict";e.exports=n.p+"a8ec0babdc3aed51.csv"},9523:function(e,t,n){"use strict";e.exports=n.p+"2723661b7e79ce3d.csv"},4018:function(e,t,n){"use strict";e.exports=n.p+"83738881ebf72ceb.tsv"},2586:function(e,t,n){"use strict";e.exports=n.p+"5e2a76b8e983d14a.csv"},7680:function(e,t,n){"use strict";var r=n(9504);e.exports=r([].slice)},9544:function(e,t,n){"use strict";var r=n(2839);e.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(r)},8745:function(e,t,n){"use strict";var r=n(616),a=Function.prototype,i=a.apply,o=a.call;e.exports="object"==typeof Reflect&&Reflect.apply||(r?o.bind(i):function(){return o.apply(i,arguments)})},6080:function(e,t,n){"use strict";var r=n(7476),a=n(9306),i=n(616),o=r(r.bind);e.exports=function(e,t){return a(e),void 0===t?e:i?o(e,t):function(){return e.apply(t,arguments)}}},9472:function(e,t,n){"use strict";var r=n(4576),a=n(8745),i=n(4901),o=n(4215),s=n(2839),l=n(7680),u=n(2812),c=r.Function,d=/MSIE .\./.test(s)||"BUN"===o&&function(){var e=r.Bun.version.split(".");return e.length<3||"0"===e[0]&&(e[1]<3||"3"===e[1]&&"0"===e[2])}();e.exports=function(e,t){var n=t?2:1;return d?function(r,o){var s=u(arguments.length,1)>n,d=i(r)?r:c(r),f=s?l(arguments,n):[],p=s?function(){a(d,this,f)}:d;return t?e(p,o):e(p)}:e}},9225:function(e,t,n){"use strict";var r,a,i,o,s=n(4576),l=n(8745),u=n(6080),c=n(4901),d=n(9297),f=n(9039),p=n(397),m=n(7680),h=n(4055),b=n(2812),v=n(9544),g=n(6193),w=s.setImmediate,y=s.clearImmediate,_=s.process,k=s.Dispatch,x=s.Function,A=s.MessageChannel,E=s.String,q=0,S={},T="onreadystatechange";f((function(){r=s.location}));var N=function(e){if(d(S,e)){var t=S[e];delete S[e],t()}},I=function(e){return function(){N(e)}},L=function(e){N(e.data)},C=function(e){s.postMessage(E(e),r.protocol+"//"+r.host)};w&&y||(w=function(e){b(arguments.length,1);var t=c(e)?e:x(e),n=m(arguments,1);return S[++q]=function(){l(t,void 0,n)},a(q),q},y=function(e){delete S[e]},g?a=function(e){_.nextTick(I(e))}:k&&k.now?a=function(e){k.now(I(e))}:A&&!v?(i=new A,o=i.port2,i.port1.onmessage=L,a=u(o.postMessage,o)):s.addEventListener&&c(s.postMessage)&&!s.importScripts&&r&&"file:"!==r.protocol&&!f(C)?(a=C,s.addEventListener("message",L,!1)):a=T in h("script")?function(e){p.appendChild(h("script"))[T]=function(){p.removeChild(this),N(e)}}:function(e){setTimeout(I(e),0)}),e.exports={set:w,clear:y}},6368:function(e,t,n){"use strict";var r=n(6518),a=n(4576),i=n(9225).clear;r({global:!0,bind:!0,enumerable:!0,forced:a.clearImmediate!==i},{clearImmediate:i})},9848:function(e,t,n){"use strict";n(6368),n(9309)},9309:function(e,t,n){"use strict";var r=n(6518),a=n(4576),i=n(9225).set,o=n(9472),s=a.setImmediate?o(i,!1):i;r({global:!0,bind:!0,enumerable:!0,forced:a.setImmediate!==s},{setImmediate:s})},2384:function(e,t,n){"use strict";function r(e){return e&&"function"===typeof e.toArrowBuffer}n.r(t),n.d(t,{isArqueroTable:function(){return r}})},9886:function(e,t,n){"use strict";n.r(t),n.d(t,{getArrowTableSchema:function(){return o},isArrowTable:function(){return i},loadArrow:function(){return u}});var r=n(1114),a=n(8064);function i(e){return e&&"function"===typeof e.getChild&&"function"===typeof e.toArray&&e.schema&&Array.isArray(e.schema.fields)}function o(e){return e.schema.fields.map(s)}function s(e){return{name:e.name,type:l(e.type),nullable:e.nullable,databaseType:String(e.type)}}function l(e){switch(e.typeId){case 2:return"integer";case 3:case 7:return"number";case 4:case 15:return"buffer";case 5:return"string";case 6:return"boolean";case 8:case 9:case 10:return"date";case 12:case 16:return"array";case 13:case 14:return"object";case 11:case 17:default:return"other"}}async function u(){return await n(6373)(`${a.cdn}${r.arrow11.resolve()}`)}},1114:function(e,t,n){"use strict";n.r(t),n.d(t,{arquero:function(){return _},arrow11:function(){return y},arrow4:function(){return g},arrow9:function(){return w},d3:function(){return a},duckdb:function(){return q},exceljs:function(){return x},graphviz:function(){return s},highlight:function(){return l},htl:function(){return d},inputs:function(){return i},jszip:function(){return f},katex:function(){return u},leaflet:function(){return E},lodash:function(){return c},marked:function(){return p},mermaid:function(){return A},plot:function(){return o},sql:function(){return m},topojson:function(){return k},vega:function(){return h},vegalite:function(){return b},vegaliteApi:function(){return v}});var r=n(5542);const a=(0,r.dependency)("d3","7.9.0","dist/d3.min.js"),i=(0,r.dependency)("@observablehq/inputs","0.11.0","dist/inputs.min.js"),o=(0,r.dependency)("@observablehq/plot","0.6.16","dist/plot.umd.min.js"),s=(0,r.dependency)("@observablehq/graphviz","0.2.1","dist/graphviz.min.js"),l=(0,r.dependency)("@observablehq/highlight.js","2.0.0","highlight.min.js"),u=(0,r.dependency)("@observablehq/katex","0.11.1","dist/katex.min.js"),c=(0,r.dependency)("lodash","4.17.21","lodash.min.js"),d=(0,r.dependency)("htl","0.3.1","dist/htl.min.js"),f=(0,r.dependency)("jszip","3.10.1","dist/jszip.min.js"),p=(0,r.dependency)("marked","0.3.12","marked.min.js"),m=(0,r.dependency)("sql.js","1.8.0","dist/sql-wasm.js"),h=(0,r.dependency)("vega","5.22.1","build/vega.min.js"),b=(0,r.dependency)("vega-lite","5.6.0","build/vega-lite.min.js"),v=(0,r.dependency)("vega-lite-api","5.0.0","build/vega-lite-api.min.js"),g=(0,r.dependency)("apache-arrow","4.0.1","Arrow.es2015.min.js"),w=(0,r.dependency)("apache-arrow","9.0.0","+esm"),y=(0,r.dependency)("apache-arrow","11.0.0","+esm"),_=(0,r.dependency)("arquero","4.8.8","dist/arquero.min.js"),k=(0,r.dependency)("topojson-client","3.1.0","dist/topojson-client.min.js"),x=(0,r.dependency)("exceljs","4.3.0","dist/exceljs.min.js"),A=(0,r.dependency)("mermaid","9.2.2","dist/mermaid.min.js"),E=(0,r.dependency)("leaflet","1.9.3","dist/leaflet.js"),q=(0,r.dependency)("@duckdb/duckdb-wasm","1.24.0","+esm")},5542:function(e,t,n){"use strict";function r(e,t,n){return{resolve(r=n){return`${e}@${t}/${r}`}}}n.r(t),n.d(t,{dependency:function(){return r}})},690:function(e,t,n){"use strict";function r(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n}n.r(t),n.d(t,{canvas:function(){return r}})},1421:function(e,t,n){"use strict";function r(e,t,n){null==n&&(n=devicePixelRatio);var r=document.createElement("canvas");r.width=e*n,r.height=t*n,r.style.width=e+"px";var a=r.getContext("2d");return a.scale(n,n),a}n.r(t),n.d(t,{context2d:function(){return r}})},3490:function(e,t,n){"use strict";n.r(t),n.d(t,{download:function(){return r}});n(4603),n(7566),n(8721);function r(e,t="untitled",n="Save"){const r=document.createElement("a"),a=r.appendChild(document.createElement("button"));async function i(){await new Promise(requestAnimationFrame),URL.revokeObjectURL(r.href),r.removeAttribute("href"),a.textContent=n,a.disabled=!1}return a.textContent=n,r.download=t,r.onclick=async t=>{if(a.disabled=!0,r.href)return i();a.textContent="Saving…";try{const t=await("function"===typeof e?e():e);a.textContent="Download",r.href=URL.createObjectURL(t)}catch(o){a.textContent=n}if(t.eventPhase)return i();a.disabled=!1},r}},8268:function(e,t,n){"use strict";n.r(t),n.d(t,{element:function(){return a}});var r={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function a(e,t){var n,a=e+="",i=a.indexOf(":");i>=0&&"xmlns"!==(a=e.slice(0,i))&&(e=e.slice(i+1));var o=r.hasOwnProperty(a)?document.createElementNS(r[a],e):document.createElement(e);if(t)for(var s in t)a=s,i=a.indexOf(":"),n=t[s],i>=0&&"xmlns"!==(a=s.slice(0,i))&&(s=s.slice(i+1)),r.hasOwnProperty(a)?o.setAttributeNS(r[a],s,n):o.setAttribute(s,n);return o}},1880:function(e,t,n){"use strict";n.r(t),n.d(t,{canvas:function(){return r.canvas},context2d:function(){return a.context2d},download:function(){return i.download},element:function(){return o.element},input:function(){return s.input},range:function(){return l.range},select:function(){return u.select},svg:function(){return c.svg},text:function(){return d.text},uid:function(){return f.uid}});var r=n(690),a=n(1421),i=n(3490),o=n(8268),s=n(5304),l=n(2365),u=n(3366),c=n(6925),d=n(553),f=n(9870)},5304:function(e,t,n){"use strict";function r(e){var t=document.createElement("input");return null!=e&&(t.type=e),t}n.r(t),n.d(t,{input:function(){return r}})},2365:function(e,t,n){"use strict";function r(e,t,n){1===arguments.length&&(t=e,e=null);var r=document.createElement("input");return r.min=e=null==e?0:+e,r.max=t=null==t?1:+t,r.step=null==n?"any":n=+n,r.type="range",r}n.r(t),n.d(t,{range:function(){return r}})},3366:function(e,t,n){"use strict";function r(e){var t=document.createElement("select");return Array.prototype.forEach.call(e,(function(e){var n=document.createElement("option");n.value=n.textContent=e,t.appendChild(n)})),t}n.r(t),n.d(t,{select:function(){return r}})},6925:function(e,t,n){"use strict";function r(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.setAttribute("viewBox",[0,0,e,t]),n.setAttribute("width",e),n.setAttribute("height",t),n}n.r(t),n.d(t,{svg:function(){return r}})},553:function(e,t,n){"use strict";function r(e){return document.createTextNode(e)}n.r(t),n.d(t,{text:function(){return r}})},9870:function(e,t,n){"use strict";n.r(t),n.d(t,{uid:function(){return a}});n(4603),n(7566),n(8721);var r=0;function a(e){return new i("O-"+(null==e?"":e+"-")+ ++r)}function i(e){this.id=e,this.href=new URL(`#${e}`,location)+""}i.prototype.toString=function(){return"url("+this.href+")"}},1656:function(e,t,n){"use strict";n.r(t),n.d(t,{DuckDBClient:function(){return u}});n(4114),n(6573),n(8100),n(7936),n(7467),n(4732),n(9577),n(4603),n(7566),n(8721);var r=n(2384),a=n(9886),i=n(1114),o=n(7796),s=n(8064);let l;class u{constructor(e){Object.defineProperties(this,{_db:{value:e}})}async queryStream(e,t){const n=await this._db.connect();let r,i;try{if(t?.length>0){const a=await n.prepare(e);r=await a.send(...t)}else r=await n.send(e);if(i=await r.next(),i.done)throw new Error("missing first batch")}catch(o){throw await n.close(),o}return{schema:(0,a.getArrowTableSchema)(i.value),async*readRows(){try{while(!i.done)yield i.value.toArray(),i=await r.next()}finally{await n.close()}}}}async query(e,t){const n=await this.queryStream(e,t),r=[];for await(const a of n.readRows())for(const e of a)r.push(e);return r.schema=n.schema,r}async queryRow(e,t){const n=await this.queryStream(e,t),r=n.readRows();try{const{done:e,value:t}=await r.next();return e||!t.length?null:t[0]}finally{await r.return()}}async sql(e,...t){return await this.query(e.join("?"),t)}queryTag(e,...t){return[e.join("?"),t]}escape(e){return`"${e}"`}async describeTables(){const e=await this.query("SHOW TABLES");return e.map((({name:e})=>({name:e})))}async describeColumns({table:e}={}){const t=await this.query(`DESCRIBE ${this.escape(e)}`);return t.map((({column_name:e,column_type:t,null:n})=>({name:e,type:v(t),nullable:"NO"!==n,databaseType:t})))}static async of(e={},t={}){const n=await b();return void 0===t.query?.castTimestampToDate&&(t={...t,query:{...t.query,castTimestampToDate:!0}}),void 0===t.query?.castBigIntToDouble&&(t={...t,query:{...t.query,castBigIntToDouble:!0}}),await n.open(t),await Promise.all(Object.entries(e).map((async([e,t])=>{if(t instanceof o.FileAttachment)await c(n,e,t);else if((0,a.isArrowTable)(t))await f(n,e,t);else if(Array.isArray(t))await m(n,e,t);else if((0,r.isArqueroTable)(t))await p(n,e,t);else if("data"in t){const{data:r,...i}=t;(0,a.isArrowTable)(r)?await f(n,e,r,i):await m(n,e,r,i)}else{if(!("file"in t))throw new Error(`invalid source: ${t}`);{const{file:r,...a}=t;await c(n,e,r,a)}}}))),new u(n)}}async function c(e,t,n,r){const a=await n.url();if(a.startsWith("blob:")){const t=await n.arrayBuffer();await e.registerFileBuffer(n.name,new Uint8Array(t))}else await e.registerFileURL(n.name,new URL(a,location).href,4);const i=await e.connect();try{switch(n.mimeType){case"text/csv":case"text/tab-separated-values":return await i.insertCSVFromPath(n.name,{name:t,schema:"main",...r}).catch((async e=>{if(e.toString().includes("Could not convert"))return await d(i,n,t);throw e}));case"application/json":return await i.insertJSONFromPath(n.name,{name:t,schema:"main",...r});default:if(/\.arrow$/i.test(n.name)){const e=new Uint8Array(await n.arrayBuffer());return await i.insertArrowFromIPCStream(e,{name:t,schema:"main",...r})}if(/\.parquet$/i.test(n.name))return await i.query(`CREATE VIEW '${t}' AS SELECT * FROM parquet_scan('${n.name}')`);throw new Error(`unknown file type: ${n.mimeType}`)}}finally{await i.close()}}async function d(e,t,n){const r=await e.prepare(`CREATE TABLE '${n}' AS SELECT * FROM read_csv_auto(?, ALL_VARCHAR=TRUE)`);return await r.send(t.name)}async function f(e,t,n,r){const a=await e.connect();try{await a.insertArrowTable(n,{name:t,schema:"main",...r})}finally{await a.close()}}async function p(e,t,n){const r=await(0,a.loadArrow)(),i=r.tableFromIPC(n.toArrowBuffer());return await f(e,t,i)}async function m(e,t,n,r){const i=await(0,a.loadArrow)(),o=i.tableFromJSON(n);return await f(e,t,o,r)}async function h(){const e=await n(6373)(`${s.cdn}${i.duckdb.resolve()}`),t=await e.selectBundle({mvp:{mainModule:`${s.cdn}${i.duckdb.resolve("dist/duckdb-mvp.wasm")}`,mainWorker:`${s.cdn}${i.duckdb.resolve("dist/duckdb-browser-mvp.worker.js")}`},eh:{mainModule:`${s.cdn}${i.duckdb.resolve("dist/duckdb-eh.wasm")}`,mainWorker:`${s.cdn}${i.duckdb.resolve("dist/duckdb-browser-eh.worker.js")}`}}),r=new e.ConsoleLogger;return{module:e,bundle:t,logger:r}}async function b(){void 0===l&&(l=h());const{module:e,bundle:t,logger:n}=await l,r=await e.createWorker(t.mainWorker),a=new e.AsyncDuckDB(n,r);return await a.instantiate(t.mainModule),a}function v(e){switch(e){case"BIGINT":case"HUGEINT":case"UBIGINT":return"bigint";case"DOUBLE":case"REAL":case"FLOAT":return"number";case"INTEGER":case"SMALLINT":case"TINYINT":case"USMALLINT":case"UINTEGER":case"UTINYINT":return"integer";case"BOOLEAN":return"boolean";case"DATE":case"TIMESTAMP":case"TIMESTAMP WITH TIME ZONE":return"date";case"VARCHAR":case"UUID":return"string";default:return/^DECIMAL\(/.test(e)?"integer":"other"}}Object.defineProperty(u.prototype,"dialect",{value:"duckdb"})},7796:function(e,t,n){"use strict";n.r(t),n.d(t,{AbstractFile:function(){return L},FileAttachment:function(){return C},FileAttachments:function(){return P},NoFileAttachments:function(){return j},ZipArchive:function(){return M},enforceSchema:function(){return N}});n(4603),n(7566),n(8721),n(4114);var r={},a={},i=34,o=10,s=13;function l(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function u(e,t){var n=l(e);return function(r,a){return t(n(r),a,e)}}function c(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function d(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function f(e){return e<0?"-"+d(-e,6):e>9999?"+"+d(e,6):d(e,4)}function p(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":f(e.getUTCFullYear(),4)+"-"+d(e.getUTCMonth()+1,2)+"-"+d(e.getUTCDate(),2)+(a?"T"+d(t,2)+":"+d(n,2)+":"+d(r,2)+"."+d(a,3)+"Z":r?"T"+d(t,2)+":"+d(n,2)+":"+d(r,2)+"Z":n||t?"T"+d(t,2)+":"+d(n,2)+"Z":"")}function m(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function d(e,t){var n,r,a=f(e,(function(e,a){if(n)return n(e,a-1);r=e,n=t?u(e,t):l(e)}));return a.columns=r||[],a}function f(e,t){var l,u=[],c=e.length,d=0,f=0,p=c<=0,m=!1;function h(){if(p)return a;if(m)return m=!1,r;var t,l,u=d;if(e.charCodeAt(u)===i){while(d++<c&&e.charCodeAt(d)!==i||e.charCodeAt(++d)===i);return(t=d)>=c?p=!0:(l=e.charCodeAt(d++))===o?m=!0:l===s&&(m=!0,e.charCodeAt(d)===o&&++d),e.slice(u+1,t-1).replace(/""/g,'"')}while(d<c){if((l=e.charCodeAt(t=d++))===o)m=!0;else if(l===s)m=!0,e.charCodeAt(d)===o&&++d;else if(l!==n)continue;return e.slice(u,t)}return p=!0,e.slice(u,c)}e.charCodeAt(c-1)===o&&--c,e.charCodeAt(c-1)===s&&--c;while((l=h())!==a){var b=[];while(l!==r&&l!==a)b.push(l),l=h();t&&null==(b=t(b,f++))||u.push(b)}return u}function m(t,n){return t.map((function(t){return n.map((function(e){return w(t[e])})).join(e)}))}function h(t,n){return null==n&&(n=c(t)),[n.map(w).join(e)].concat(m(t,n)).join("\n")}function b(e,t){return null==t&&(t=c(e)),m(e,t).join("\n")}function v(e){return e.map(g).join("\n")}function g(t){return t.map(w).join(e)}function w(e){return null==e?"":e instanceof Date?p(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:d,parseRows:f,format:h,formatBody:b,formatRows:v,formatRow:g,formatValue:w}}var h=m("\t"),b=h.parse,v=h.parseRows,g=(h.format,h.formatBody,h.formatRows,h.formatRow,h.formatValue,m(",")),w=g.parse,y=g.parseRows;g.format,g.formatBody,g.formatRows,g.formatRow,g.formatValue;function _(e){for(var t in e){var n,r,a=e[t].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(n=+a)){if(!(r=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;k&&r[4]&&!r[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=n;else a=null;e[t]=a}return e}const k=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();var x=n(1114),A=n(8064),E=n(4687),q=n(5729),S=n(7816);async function T(e){const t=await fetch(await e.url());if(!t.ok)throw new Error(`Unable to load file: ${e.name}`);return t}function N(e,t){const n=new Map(t.map((({name:e,type:t})=>[e,t])));return Object.assign(e.map((e=>(0,q.coerceRow)(e,n,t))),{schema:t})}async function I(e,t,{array:n=!1,typed:r=!1}={}){const a=await e.text(),i="\t"===t?n?v:b:n?y:w;if("auto"===r&&!n){const e=i(a);return N(e,(0,q.inferSchema)(e,e.columns))}return i(a,r&&_)}class L{constructor(e,t){Object.defineProperty(this,"name",{value:e,enumerable:!0}),void 0!==t&&Object.defineProperty(this,"mimeType",{value:t+"",enumerable:!0})}async blob(){return(await T(this)).blob()}async arrayBuffer(){return(await T(this)).arrayBuffer()}async text(){return(await T(this)).text()}async json(){return(await T(this)).json()}async stream(){return(await T(this)).body}async csv(e){return I(this,",",e)}async tsv(e){return I(this,"\t",e)}async image(e){const t=await this.url();return new Promise(((n,r)=>{const a=new Image;new URL(t,document.baseURI).origin!==new URL(location).origin&&(a.crossOrigin="anonymous"),Object.assign(a,e),a.onload=()=>n(a),a.onerror=()=>r(new Error(`Unable to load file: ${this.name}`)),a.src=t}))}async arrow({version:e=4}={}){switch(e){case 4:{const[e,t]=await Promise.all([(0,A.requireDefault)(x.arrow4.resolve()),T(this)]);return e.Table.from(t)}case 9:{const[e,t]=await Promise.all([n(6373)(`${A.cdn}${x.arrow9.resolve()}`),T(this)]);return e.tableFromIPC(t)}case 11:{const[e,t]=await Promise.all([n(6373)(`${A.cdn}${x.arrow11.resolve()}`),T(this)]);return e.tableFromIPC(t)}default:throw new Error(`unsupported arrow version: ${e}`)}}async sqlite(){return E.SQLiteDatabaseClient.open(T(this))}async zip(){const[e,t]=await Promise.all([(0,A.requireDefault)(x.jszip.resolve()),this.arrayBuffer()]);return new M(await e.loadAsync(t))}async xml(e="application/xml"){return(new DOMParser).parseFromString(await this.text(),e)}async html(){return this.xml("text/html")}async xlsx(){const[e,t]=await Promise.all([(0,A.requireDefault)(x.exceljs.resolve()),this.arrayBuffer()]);return new S.Workbook(await(new e.Workbook).xlsx.load(t))}}class C extends L{constructor(e,t,n){super(t,n),Object.defineProperty(this,"_url",{value:e})}async url(){return await this._url+""}}function j(e){throw new Error(`File not found: ${e}`)}function P(e){return Object.assign((t=>{const n=e(t+="");if(null==n)throw new Error(`File not found: ${t}`);if("object"===typeof n&&"url"in n){const{url:e,mimeType:r}=n;return new C(e,t,r)}return new C(n,t)}),{prototype:C.prototype})}class M{constructor(e){Object.defineProperty(this,"_",{value:e}),this.filenames=Object.keys(e.files).filter((t=>!e.files[t].dir))}file(e){const t=this._.file(e+="");if(!t||t.dir)throw new Error(`file not found: ${e}`);return new R(t)}}class R extends L{constructor(e){super(e.name),Object.defineProperty(this,"_",{value:e}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=this.blob().then(URL.createObjectURL))}async blob(){return this._.async("blob")}async arrayBuffer(){return this._.async("arraybuffer")}async text(){return this._.async("text")}async json(){return JSON.parse(await this.text())}}},6425:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsArrayBuffer(e)}))}n.r(t),n.d(t,{buffer:function(){return r}})},6559:function(e,t,n){"use strict";n.r(t),n.d(t,{buffer:function(){return r.buffer},text:function(){return a.text},url:function(){return i.url}});var r=n(6425),a=n(2864),i=n(2166)},2864:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsText(e)}))}n.r(t),n.d(t,{text:function(){return r}})},2166:function(e,t,n){"use strict";function r(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=n,r.readAsDataURL(e)}))}n.r(t),n.d(t,{url:function(){return r}})},3938:function(e,t,n){"use strict";n.r(t),n.d(t,{disposable:function(){return a}});var r=n(7374);function a(e,t){let n=!1;if("function"!==typeof t)throw new Error("dispose is not a function");return{[Symbol.iterator]:r.that,next:()=>n?{done:!0}:(n=!0,{done:!1,value:e}),return:()=>(n=!0,t(e),{done:!0}),throw:()=>({done:n=!0})}}},7134:function(e,t,n){"use strict";function*r(e,t){var n,r=-1;while(!(n=e.next()).done)t(n.value,++r)&&(yield n.value)}n.r(t),n.d(t,{filter:function(){return r}})},6434:function(e,t,n){"use strict";n.r(t),n.d(t,{disposable:function(){return r.disposable},filter:function(){return a.filter},input:function(){return i.input},map:function(){return o.map},observe:function(){return s.observe},queue:function(){return l.queue},range:function(){return u.range},valueAt:function(){return c.valueAt},worker:function(){return d.worker}});var r=n(3938),a=n(7134),i=n(5818),o=n(7240),s=n(5086),l=n(4605),u=n(5767),c=n(9478),d=n(9834)},5818:function(e,t,n){"use strict";n.r(t),n.d(t,{input:function(){return a}});var r=n(5086);function a(e){return(0,r.observe)((function(t){var n=o(e),r=i(e);function a(){t(i(e))}return e.addEventListener(n,a),void 0!==r&&t(r),function(){e.removeEventListener(n,a)}}))}function i(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];case"select-multiple":return Array.from(e.selectedOptions,(e=>e.value));default:return e.value}}function o(e){switch(e.type){case"button":case"submit":case"checkbox":return"click";case"file":return"change";default:return"input"}}},7240:function(e,t,n){"use strict";function*r(e,t){var n,r=-1;while(!(n=e.next()).done)yield t(n.value,++r)}n.r(t),n.d(t,{map:function(){return r}})},5086:function(e,t,n){"use strict";n.r(t),n.d(t,{observe:function(){return a}});var r=n(7374);function a(e){let t,n,a=!1;const i=e(o);if(null!=i&&"function"!==typeof i)throw new Error("function"===typeof i.then?"async initializers are not supported":"initializer returned something, but not a dispose function");function o(e){return n?(n(e),n=null):a=!0,t=e}function s(){return{done:!1,value:a?(a=!1,Promise.resolve(t)):new Promise((e=>n=e))}}return{[Symbol.iterator]:r.that,throw:()=>({done:!0}),return:()=>(null!=i&&i(),{done:!0}),next:s}}},4605:function(e,t,n){"use strict";n.r(t),n.d(t,{queue:function(){return a}});n(4114);var r=n(7374);function a(e){let t;const n=[],a=e(i);if(null!=a&&"function"!==typeof a)throw new Error("function"===typeof a.then?"async initializers are not supported":"initializer returned something, but not a dispose function");function i(e){return n.push(e),t&&(t(n.shift()),t=null),e}function o(){return{done:!1,value:n.length?Promise.resolve(n.shift()):new Promise((e=>t=e))}}return{[Symbol.iterator]:r.that,throw:()=>({done:!0}),return:()=>(null!=a&&a(),{done:!0}),next:o}}},5767:function(e,t,n){"use strict";function*r(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;var r=-1,a=0|Math.max(0,Math.ceil((t-e)/n));while(++r<a)yield e+r*n}n.r(t),n.d(t,{range:function(){return r}})},9478:function(e,t,n){"use strict";function r(e,t){if(!(!isFinite(t=+t)||t<0||t!==t|0)){var n,r=-1;while(!(n=e.next()).done)if(++r===t)return n.value}}n.r(t),n.d(t,{valueAt:function(){return r}})},9834:function(e,t,n){"use strict";n.r(t),n.d(t,{worker:function(){return a}});n(4603),n(7566),n(8721);var r=n(3938);function a(e){const t=URL.createObjectURL(new Blob([e],{type:"text/javascript"})),n=new Worker(t);return(0,r.disposable)(n,(()=>{n.terminate(),URL.revokeObjectURL(t)}))}},114:function(e,t,n){"use strict";n.r(t),n.d(t,{html:function(){return a}});var r=n(505);const a=(0,r.template)((function(e){var t=document.createElement("template");return t.innerHTML=e.trim(),document.importNode(t.content,!0)}),(function(){return document.createElement("span")}))},9743:function(e,t,n){"use strict";n.r(t),n.d(t,{AbstractFile:function(){return r.AbstractFile},FileAttachments:function(){return r.FileAttachments},Library:function(){return a.Library},applyDataTableOperations:function(){return s.__table},arrayIsPrimitive:function(){return s.arrayIsPrimitive},getArrowTableSchema:function(){return i.getArrowTableSchema},getSchema:function(){return s.getSchema},getTypeValidator:function(){return s.getTypeValidator},inferSchema:function(){return s.inferSchema},isArqueroTable:function(){return o.isArqueroTable},isArrowTable:function(){return i.isArrowTable},isDataArray:function(){return s.isDataArray},isDatabaseClient:function(){return s.isDatabaseClient},loadDataSource:function(){return s.loadDataSource},makeQueryTemplate:function(){return s.makeQueryTemplate},observe:function(){return l.observe}});var r=n(7796),a=n(4284),i=n(9886),o=n(2384),s=n(5729),l=n(5086)},1282:function(e,t,n){"use strict";n.r(t),n.d(t,{leaflet:function(){return a}});var r=n(1114);async function a(e){const t=await e(r.leaflet.resolve());if(!t._style){const n=document.createElement("link");n.rel="stylesheet",n.href=await e.resolve(r.leaflet.resolve("dist/leaflet.css")),t._style=document.head.appendChild(n)}return t}},4284:function(e,t,n){"use strict";n.r(t),n.d(t,{Library:function(){return E}});var r=n(1926),a=n(1880),i=n(6559),o=n(7796),s=n(6434),l=n(1656),u=n(114),c=n(1282),d=n(4606),f=n(4444),p=n(3065),m=n(3523),h=n(8350),b=n(4911),v=n(8064),g=n(4687),w=n(693),y=n(4753),_=n(3886),k=n(8575),x=n(1114),A=n(5729);const E=Object.assign(Object.defineProperties((function(e){const t=(0,v.requirer)(e);Object.defineProperties(this,q({FileAttachment:()=>o.NoFileAttachments,Mutable:()=>p.Mutable,now:m.now,width:k.width,dot:()=>t(x.graphviz.resolve()),htl:()=>t(x.htl.resolve()),html:()=>u.html,md:()=>(0,d.md)(t),svg:()=>w.svg,tex:()=>(0,y.tex)(t),_:()=>t(x.lodash.resolve()),aq:()=>t.alias({"apache-arrow":x.arrow4.resolve()})(x.arquero.resolve()),Arrow:()=>t(x.arrow4.resolve()),d3:()=>t(x.d3.resolve()),DuckDBClient:()=>l.DuckDBClient,Inputs:()=>t(x.inputs.resolve()).then((e=>({...e,file:e.fileOf(o.AbstractFile)}))),L:()=>(0,c.leaflet)(t),mermaid:()=>(0,f.mermaid)(t),Plot:()=>t(x.plot.resolve()),__query:()=>A.__query,require:()=>t,resolve:()=>b.resolve,SQLite:()=>(0,g.SQLite)(t),SQLiteDatabaseClient:()=>g.SQLiteDatabaseClient,topojson:()=>t(x.topojson.resolve()),vl:()=>(0,_.vl)(t),aapl:()=>new o.FileAttachment("https://static.observableusercontent.com/files/3ccff97fd2d93da734e76829b2b066eafdaac6a1fafdec0faf6ebc443271cfc109d29e80dd217468fcb2aff1e6bffdc73f356cc48feb657f35378e6abbbb63b9").csv({typed:!0}),alphabet:()=>new o.FileAttachment("https://static.observableusercontent.com/files/75d52e6c3130b1cae83cda89305e17b50f33e7420ef205587a135e8562bcfd22e483cf4fa2fb5df6dff66f9c5d19740be1cfaf47406286e2eb6574b49ffc685d").csv({typed:!0}),cars:()=>new o.FileAttachment("https://static.observableusercontent.com/files/048ec3dfd528110c0665dfa363dd28bc516ffb7247231f3ab25005036717f5c4c232a5efc7bb74bc03037155cb72b1abe85a33d86eb9f1a336196030443be4f6").csv({typed:!0}),citywages:()=>new o.FileAttachment("https://static.observableusercontent.com/files/39837ec5121fcc163131dbc2fe8c1a2e0b3423a5d1e96b5ce371e2ac2e20a290d78b71a4fb08b9fa6a0107776e17fb78af313b8ea70f4cc6648fad68ddf06f7a").csv({typed:!0}),diamonds:()=>new o.FileAttachment("https://static.observableusercontent.com/files/87942b1f5d061a21fa4bb8f2162db44e3ef0f7391301f867ab5ba718b225a63091af20675f0bfe7f922db097b217b377135203a7eab34651e21a8d09f4e37252").csv({typed:!0}),flare:()=>new o.FileAttachment("https://static.observableusercontent.com/files/a6b0d94a7f5828fd133765a934f4c9746d2010e2f342d335923991f31b14120de96b5cb4f160d509d8dc627f0107d7f5b5070d2516f01e4c862b5b4867533000").csv({typed:!0}),industries:()=>new o.FileAttachment("https://static.observableusercontent.com/files/76f13741128340cc88798c0a0b7fa5a2df8370f57554000774ab8ee9ae785ffa2903010cad670d4939af3e9c17e5e18e7e05ed2b38b848ac2fc1a0066aa0005f").csv({typed:!0}),miserables:()=>new o.FileAttachment("https://static.observableusercontent.com/files/31d904f6e21d42d4963ece9c8cc4fbd75efcbdc404bf511bc79906f0a1be68b5a01e935f65123670ed04e35ca8cae3c2b943f82bf8db49c5a67c85cbb58db052").json(),olympians:()=>new o.FileAttachment("https://static.observableusercontent.com/files/31ca24545a0603dce099d10ee89ee5ae72d29fa55e8fc7c9ffb5ded87ac83060d80f1d9e21f4ae8eb04c1e8940b7287d179fe8060d887fb1f055f430e210007c").csv({typed:!0}),penguins:()=>new o.FileAttachment("https://static.observableusercontent.com/files/715db1223e067f00500780077febc6cebbdd90c151d3d78317c802732252052ab0e367039872ab9c77d6ef99e5f55a0724b35ddc898a1c99cb14c31a379af80a").csv({typed:!0}),pizza:()=>new o.FileAttachment("https://static.observableusercontent.com/files/c653108ab176088cacbb338eaf2344c4f5781681702bd6afb55697a3f91b511c6686ff469f3e3a27c75400001a2334dbd39a4499fe46b50a8b3c278b7d2f7fb5").csv({typed:!0}),weather:()=>new o.FileAttachment("https://static.observableusercontent.com/files/693a46b22b33db0f042728700e0c73e836fa13d55446df89120682d55339c6db7cc9e574d3d73f24ecc9bc7eb9ac9a1e7e104a1ee52c00aab1e77eb102913c1f").csv({typed:!0}),DOM:a,Files:i,Generators:s,Promises:h}))}),{resolve:{get:()=>v.requireDefault.resolve,enumerable:!0,configurable:!0},require:{get:()=>v.requireDefault,set:v.setDefaultRequire,enumerable:!0,configurable:!0}}),{resolveFrom:r.dx,requireFrom:r.Ky});function q(e){return Object.fromEntries(Object.entries(e).map(S))}function S([e,t]){return[e,{value:t,writable:!0,enumerable:!0}]}},4606:function(e,t,n){"use strict";n.r(t),n.d(t,{md:function(){return i}});var r=n(1114),a=n(505);function i(e){return e(r.marked.resolve()).then((function(t){return(0,a.template)((function(n){var a=document.createElement("div");a.innerHTML=t(n,{langPrefix:""}).trim();var i=a.querySelectorAll("pre code[class]");return i.length>0&&e(r.highlight.resolve()).then((function(t){i.forEach((function(n){function a(){t.highlightBlock(n),n.parentNode.classList.add("observablehq--md-pre")}t.getLanguage(n.className)?a():e(r.highlight.resolve("async-languages/index.js")).then((a=>{if(a.has(n.className))return e(r.highlight.resolve("async-languages/"+a.get(n.className))).then((e=>{t.registerLanguage(n.className,e)}))})).then(a,a)}))})),a}),(function(){return document.createElement("div")}))}))}},4444:function(e,t,n){"use strict";n.r(t),n.d(t,{mermaid:function(){return i}});var r=n(1114),a=n(9870);async function i(e){const t=await e(r.mermaid.resolve());return t.initialize({securityLevel:"loose",theme:"neutral"}),function(){const e=document.createElement("div");return e.innerHTML=t.render((0,a.uid)().id,String.raw.apply(String,arguments)),e.removeChild(e.firstChild)}}},3065:function(e,t,n){"use strict";n.r(t),n.d(t,{Mutable:function(){return a}});var r=n(5086);function a(e){let t;Object.defineProperties(this,{generator:{value:(0,r.observe)((e=>{t=e}))},value:{get:()=>e,set:n=>t(e=n)}}),void 0!==e&&t(e)}},3523:function(e,t,n){"use strict";function*r(){while(1)yield Date.now()}n.r(t),n.d(t,{now:function(){return r}})},7057:function(e,t,n){"use strict";function r(e,t){return new Promise((function(n){setTimeout((function(){n(t)}),e)}))}n.r(t),n.d(t,{delay:function(){return r}})},8350:function(e,t,n){"use strict";n.r(t),n.d(t,{delay:function(){return r.delay},tick:function(){return a.tick},when:function(){return i.when}});var r=n(7057),a=n(4537),i=n(2776)},4537:function(e,t,n){"use strict";n.r(t),n.d(t,{tick:function(){return a}});var r=n(2776);function a(e,t){return(0,r.when)(Math.ceil((Date.now()+1)/e)*e,t)}},2776:function(e,t,n){"use strict";n.r(t),n.d(t,{when:function(){return i}});var r=new Map;function a(e,t){var n=new Promise((function(n){r.delete(t);var a=t-e;if(!(a>0))throw new Error("invalid time");if(a>2147483647)throw new Error("too long to wait");setTimeout(n,a)}));return r.set(t,n),n}function i(e,t){var n;return(n=r.get(e=+e))?n.then((()=>t)):(n=Date.now())>=e?Promise.resolve(t):a(n,e).then((()=>t))}},8064:function(e,t,n){"use strict";n.r(t),n.d(t,{cdn:function(){return a},requireDefault:function(){return i},requirer:function(){return s},setDefaultRequire:function(){return o}});var r=n(1926);const a="https://cdn.observableusercontent.com/npm/";let i=r.Yp;function o(e){i=e}function s(e){return null==e?i:(0,r.Ky)(e)}},4911:function(e,t,n){"use strict";n.r(t),n.d(t,{resolve:function(){return r}});n(4603),n(7566),n(8721);function r(e,t){if(/^(\w+:)|\/\//i.test(e))return e;if(/^[.]{0,2}\//i.test(e))return new URL(e,null==t?location:t).href;if(!e.length||/^[\s._]/.test(e)||/\s$/.test(e))throw new Error("illegal name");return"https://unpkg.com/"+e}},4687:function(e,t,n){"use strict";n.r(t),n.d(t,{SQLite:function(){return i},SQLiteDatabaseClient:function(){return o}});n(6573),n(8100),n(7936),n(7467),n(4732),n(9577);var r=n(1114),a=n(8064);async function i(e){const[t,n]=await Promise.all([e(r.sql.resolve()),e.resolve(r.sql.resolve("dist/"))]);return t({locateFile:e=>`${n}${e}`})}class o{constructor(e){Object.defineProperties(this,{_db:{value:e}})}static async open(e){const[t,n]=await Promise.all([i(a.requireDefault),Promise.resolve(e).then(l)]);return new o(new t.Database(n))}async query(e,t){return await u(this._db,e,t)}async queryRow(e,t){return(await this.query(e,t))[0]||null}async explain(e,t){const n=await this.query(`EXPLAIN QUERY PLAN ${e}`,t);return c("pre",{className:"observablehq--inspect"},[d(n.map((e=>e.detail)).join("\n"))])}async describeTables({schema:e}={}){return this.query(`SELECT NULLIF(schema, 'main') AS schema, name FROM pragma_table_list() WHERE type = 'table'${null==e?"":" AND schema = ?"} AND name NOT LIKE 'sqlite_%' ORDER BY schema, name`,null==e?[]:[e])}async describeColumns({schema:e,table:t}={}){if(null==t)throw new Error("missing table");const n=await this.query(`SELECT name, type, "notnull" FROM pragma_table_info(?${null==e?"":", ?"}) ORDER BY cid`,null==e?[t]:[t,e]);if(!n.length)throw new Error(`table not found: ${t}`);return n.map((({name:e,type:t,notnull:n})=>({name:e,type:s(t),databaseType:t,nullable:!n})))}async describe(e){const t=await(void 0===e?this.query("SELECT name FROM sqlite_master WHERE type = 'table'"):this.query("SELECT * FROM pragma_table_info(?)",[e]));if(!t.length)throw new Error("Not found");const{columns:n}=t;return c("table",{value:t},[c("thead",[c("tr",n.map((e=>c("th",[d(e)]))))]),c("tbody",t.map((e=>c("tr",n.map((t=>c("td",[d(e[t])])))))))])}async sql(){return this.query(...this.queryTag.apply(this,arguments))}queryTag(e,...t){return[e.join("?"),t]}}function s(e){switch(e){case"NULL":return"null";case"INT":case"INTEGER":case"TINYINT":case"SMALLINT":case"MEDIUMINT":case"BIGINT":case"UNSIGNED BIG INT":case"INT2":case"INT8":return"integer";case"TEXT":case"CLOB":return"string";case"REAL":case"DOUBLE":case"DOUBLE PRECISION":case"FLOAT":case"NUMERIC":return"number";case"BLOB":return"buffer";case"DATE":case"DATETIME":return"string";default:return/^(?:(?:(?:VARYING|NATIVE) )?CHARACTER|(?:N|VAR|NVAR)CHAR)\(/.test(e)?"string":/^(?:DECIMAL|NUMERIC)\(/.test(e)?"number":"other"}}function l(e){return"string"===typeof e?fetch(e).then(l):e instanceof Response||e instanceof Blob?e.arrayBuffer().then(l):e instanceof ArrayBuffer?new Uint8Array(e):e}async function u(e,t,n){const[r]=await e.exec(t,n);if(!r)return[];const{columns:a,values:i}=r,o=i.map((e=>Object.fromEntries(e.map(((e,t)=>[a[t],e])))));return o.columns=a,o}function c(e,t,n){2===arguments.length&&(n=t,t=void 0);const r=document.createElement(e);if(void 0!==t)for(const a in t)r[a]=t[a];if(void 0!==n)for(const a of n)r.appendChild(a);return r}function d(e){return document.createTextNode(e)}Object.defineProperty(o.prototype,"dialect",{value:"sqlite"})},693:function(e,t,n){"use strict";n.r(t),n.d(t,{svg:function(){return a}});var r=n(505);const a=(0,r.template)((function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","g");return t.innerHTML=e.trim(),t}),(function(){return document.createElementNS("http://www.w3.org/2000/svg","g")}))},5729:function(e,t,n){"use strict";n.r(t),n.d(t,{__query:function(){return k},__table:function(){return oe},arrayIsPrimitive:function(){return g},coerceRow:function(){return se},coerceToType:function(){return ne},getSchema:function(){return re},getTypeValidator:function(){return ee},inferSchema:function(){return de},isDataArray:function(){return f},isDatabaseClient:function(){return d},loadDataSource:function(){return x},makeQueryTemplate:function(){return j}});n(4114),n(6573),n(8100),n(7936),n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698),n(7467),n(4732),n(9577);function r(e){if("function"!==typeof e[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(e).reverse()}function a(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i(e,t=a){let n,r=!1;if(1===t.length){let i;for(const o of e){const e=t(o);(r?a(e,i)>0:0===a(e,e))&&(n=o,i=e,r=!0)}}else for(const a of e)(r?t(a,n)>0:0===t(a,a))&&(n=a,r=!0);return n}var o=n(7796),s=n(2384),l=n(9886),u=n(1656);const c=20;function d(e,t){return e&&("function"===typeof e.sql||"function"===typeof e.queryTag&&("function"===typeof e.query||"function"===typeof e.queryStream))&&("table"!==t||"function"===typeof e.describeColumns)&&e!==k}function f(e){return Array.isArray(e)&&(h(e.schema)||b(e.columns)||p(e)||w(e)||y(e))||_(e)}function p(e){const t=Math.min(c,e.length);for(let n=0;n<t;++n){const t=e[n];if(null===t||"object"!==typeof t)return!1}return t>0&&m(e[0])}function m(e){for(const t in e)return!0;return!1}function h(e){return Array.isArray(e)&&e.every(v)}function b(e){return Array.isArray(e)&&e.every((e=>"string"===typeof e))}function v(e){return e&&"string"===typeof e.name&&"string"===typeof e.type}function g(e){return _(e)||w(e)||y(e)}function w(e){const t=Math.min(c,e.length);if(!(t>0))return!1;let n,r=!1;for(let a=0;a<t;++a){const t=e[a];if(null==t)continue;const i=typeof t;if(void 0===n)switch(i){case"number":case"boolean":case"string":case"bigint":n=i;break;default:return!1}else if(i!==n)return!1;r=!0}return r}function y(e){const t=Math.min(c,e.length);if(!(t>0))return!1;let n=!1;for(let r=0;r<t;++r){const t=e[r];if(null!=t){if(!(t instanceof Date))return!1;n=!0}}return n}function _(e){return e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array}const k=Object.assign((async(e,t,n,r)=>{if(e=await q(await e,r),d(e))return L(e,j(t,e),n);if(f(e))return oe(e,t);if(!e)throw new Error("missing data source");throw new Error("invalid data source")}),{sql(e,t,n){return async function(){return L(await S(await e,n),arguments,t)}}});async function x(e,t,n){switch(t){case"chart":return E(e);case"table":return q(e,n);case"sql":return S(e,n)}return e}function A(e){const t=new WeakMap;return(n,r)=>{if(!n||"object"!==typeof n)throw new Error("invalid data source");let a=t.get(n);return(!a||f(n)&&n.length!==a._numRows)&&(a=e(n,r),a._numRows=n.length,t.set(n,a)),a}}const E=A((async e=>{if(e instanceof o.FileAttachment){switch(e.mimeType){case"text/csv":return e.csv({typed:"auto"});case"text/tab-separated-values":return e.tsv({typed:"auto"});case"application/json":return e.json()}throw new Error(`unsupported file type: ${e.mimeType}`)}return e})),q=A((async(e,t)=>{if(e instanceof o.FileAttachment){switch(e.mimeType){case"text/csv":return e.csv();case"text/tab-separated-values":return e.tsv();case"application/json":return e.json();case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return N(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return(0,l.isArrowTable)(e)||(0,s.isArqueroTable)(e)?N(e,t):f(e)&&g(e)?Array.from(e,(e=>({value:e}))):e})),S=A((async(e,t)=>{if(e instanceof o.FileAttachment){switch(e.mimeType){case"text/csv":case"text/tab-separated-values":case"application/json":return N(e,t);case"application/x-sqlite3":return e.sqlite()}if(/\.(arrow|parquet)$/i.test(e.name))return N(e,t);throw new Error(`unsupported file type: ${e.mimeType}`)}return f(e)?N(await T(e,t),t):(0,l.isArrowTable)(e)||(0,s.isArqueroTable)(e)?N(e,t):e}));async function T(e,t){const n=await(0,l.loadArrow)();return g(e)?n.tableFromArrays({[t]:e}):n.tableFromJSON(e)}function N(e,t=(e instanceof o.FileAttachment?I(e):"__table")){return u.DuckDBClient.of({[t]:e})}function I(e){return e.name.replace(/@\d+(?=\.|$)/,"").replace(/\.\w+$/,"")}async function L(e,t,n){if(!e)throw new Error("missing data source");if("function"===typeof e.queryTag){const r=new AbortController,a={signal:r.signal};if(n.then((()=>r.abort("invalidated"))),"function"===typeof e.queryStream)return C(e.queryStream(...e.queryTag.apply(e,t),a));if("function"===typeof e.query)return e.query(...e.queryTag.apply(e,t),a)}if("function"===typeof e.sql)return e.sql.apply(e,t);throw new Error("source does not implement query, queryStream, or sql")}async function*C(e){let t=performance.now();const n=await e,r=[];r.done=!1,r.error=null,r.schema=n.schema;try{for await(const e of n.readRows()){performance.now()-t>150&&r.length>0&&(yield r,t=performance.now());for(const t of e)r.push(t)}r.done=!0,yield r}catch(a){r.error=a,yield r}}function j(e,t){const n="function"===typeof t.escape?t.escape:e=>e,{select:r,from:a,filter:i,sort:o,slice:s}=e;if(!a.table)throw new Error("missing from table");if(r.columns&&0===r.columns.length)throw new Error("at least one column must be selected");const l=new Map(e.names?.map((({column:e,name:t})=>[e,t]))),u=r.columns?r.columns.map((e=>{const t=l.get(e);return t?`${n(e)} AS ${n(t)}`:n(e)})).join(", "):"*",c=[[`SELECT ${u} FROM ${P(a.table,n)}`]];for(let d=0;d<i.length;++d)M(d?"\nAND ":"\nWHERE ",c),D(i[d],c,n);for(let d=0;d<o.length;++d)M(d?", ":"\nORDER BY ",c),R(o[d],c,n);if("mssql"===t.dialect||"oracle"===t.dialect){if(null!==s.to||null!==s.from){if(!o.length){if(!r.columns)throw new Error("at least one column must be explicitly specified. Received '*'.");M("\nORDER BY ",c),R({column:r.columns[0],direction:"ASC"},c,n)}M(`\nOFFSET ${s.from||0} ROWS`,c),M(`\nFETCH NEXT ${null!==s.to?s.to-(s.from||0):1e9} ROWS ONLY`,c)}}else null===s.to&&null===s.from||M("\nLIMIT "+(null!==s.to?s.to-(s.from||0):1e9),c),null!==s.from&&M(` OFFSET ${s.from}`,c);return c}function P(e,t){if("object"===typeof e){let n="";return null!=e.database&&(n+=t(e.database)+"."),null!=e.schema&&(n+=t(e.schema)+"."),n+=t(e.table),n}return t(e)}function M(e,t){const n=t[0];n[n.length-1]+=e}function R({column:e,direction:t},n,r){M(`${r(e)} ${t.toUpperCase()}`,n)}function D({type:e,operands:t},n,r){if(t.length<1)throw new Error("Invalid operand length");if(1===t.length||"v"===e||"nv"===e)switch($(t[0],n,r),e){case"n":case"nv":return void M(" IS NULL",n);case"nn":case"v":return void M(" IS NOT NULL",n);default:throw new Error("Invalid filter operation")}if(2!==t.length||["in","nin"].includes(e)){switch($(t[0],n,r),e){case"in":M(" IN (",n);break;case"nin":M(" NOT IN (",n);break;default:throw new Error("Invalid filter operation")}O(t.slice(1),n),M(")",n)}else{if(["c","nc"].includes(e)){switch($(t[0],n,r),e){case"c":M(" LIKE ",n);break;case"nc":M(" NOT LIKE ",n);break}return void $(F(t[1]),n,r)}switch($(t[0],n,r),e){case"eq":M(" = ",n);break;case"ne":M(" <> ",n);break;case"gt":M(" > ",n);break;case"lt":M(" < ",n);break;case"gte":M(" >= ",n);break;case"lte":M(" <= ",n);break;default:throw new Error("Invalid filter operation")}$(t[1],n,r)}}function $(e,t,n){"column"===e.type?M(n(e.value),t):(t.push(e.value),t[0].push(""))}function O(e,t){let n=!0;for(const r of e)n?n=!1:M(",",t),t.push(r.value),t[0].push("")}function F(e){return{...e,value:`%${e.value}%`}}function B(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))}function V(e,t){return B(e,t)||(e<t?-1:e>t?1:0)}function U(e,t){return B(e,t)||(e>t?-1:e<t?1:0)}const z=e=>"number"===typeof e&&!Number.isNaN(e),Q=e=>Number.isInteger(e)&&!Number.isNaN(e),W=e=>"string"===typeof e,G=e=>"boolean"===typeof e,H=e=>"bigint"===typeof e,Y=e=>e instanceof Date&&!isNaN(e),J=e=>e instanceof ArrayBuffer,K=e=>Array.isArray(e),Z=e=>"object"===typeof e&&null!==e,X=e=>null!=e;function ee(e){switch(e){case"string":return W;case"bigint":return H;case"boolean":return G;case"number":return z;case"integer":return Q;case"date":return Y;case"buffer":return J;case"array":return K;case"object":return Z;case"other":default:return X}}const te=/^(([-+]\d{2})?\d{4}(-\d{2}(-\d{2}))|(\d{1,2})\/(\d{1,2})\/(\d{2,4}))([T ]\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function ne(e,t){switch(t){case"string":return"string"===typeof e||null==e?e:String(e);case"boolean":if("string"===typeof e){const t=e.trim().toLowerCase();return"true"===t||"false"!==t&&null}return"boolean"===typeof e||null==e?e:Boolean(e);case"bigint":return"bigint"===typeof e||null==e?e:Number.isInteger("string"!==typeof e||e.trim()?+e:NaN)?BigInt(e):void 0;case"integer":case"number":return"number"===typeof e?e:null==e||"string"===typeof e&&!e.trim()?NaN:Number(e);case"date":{if(e instanceof Date||null==e)return e;if("number"===typeof e)return new Date(e);const t=String(e).trim();return"string"!==typeof e||t?new Date(te.test(t)?t:NaN):null}case"array":case"object":case"buffer":case"other":return e;default:throw new Error(`Unable to coerce to type: ${t}`)}}function re(e){const{columns:t}=e;let{schema:n}=e;return h(n)?{schema:n,inferred:!1}:(n=de(e,b(t)?t:void 0),{schema:n,inferred:!0})}function ae(e,t){const n=e;let{schema:r,inferred:a}=re(e);const i=new Map(r.map((({name:e,type:t})=>[e,t])));if(t.types){for(const{name:e,type:a}of t.types){i.set(e,a),r===n.schema&&(r=r.slice());const t=r.findIndex((t=>t.name===e));t>-1&&(r[t]={...r[t],type:a})}e=e.map((e=>se(e,i,r)))}else a&&(e=e.map((e=>se(e,i,r))));return{source:e,schema:r}}function ie(e,t){if(!t.names)return e;const n=new Map(t.names.map((e=>[e.column,e])));return e.map((e=>Object.fromEntries(Object.keys(e).map((t=>{const r=n.get(t);return[r?.name??t,e[t]]})))))}function oe(e,t){const n=new Map,a=e,i=ae(e,t);e=i.source;let o=i.schema;if(t.derive){const r=[];t.derive.map((({name:a,value:i})=>{let o=[];ie(e,t).map(((e,t)=>{let n;try{n=i(e)}catch(s){o.push({index:t,error:s}),n=void 0}r[t]?r[t]={...r[t],[a]:n}:r.push({[a]:n})})),o.length&&n.set(a,o)}));const a=ae(r,t);e=e.map(((e,t)=>({...e,...a.source[t]}))),o=[...o,...a.schema]}for(const{type:r,operands:c}of t.filter){const[{value:t}]=c,n=c.slice(1).map((({value:e})=>e));switch(r){case"v":{const[r]=n,a=ee(r);e=e.filter((e=>a(e[t])));break}case"nv":{const[r]=n,a=ee(r);e=e.filter((e=>!a(e[t])));break}case"eq":{const[r]=n;if(r instanceof Date){const n=+r;e=e.filter((e=>+e[t]===n))}else e=e.filter((e=>e[t]===r));break}case"ne":{const[r]=n;e=e.filter((e=>e[t]!==r));break}case"c":{const[r]=n;e=e.filter((e=>"string"===typeof e[t]&&e[t].includes(r)));break}case"nc":{const[r]=n;e=e.filter((e=>"string"===typeof e[t]&&!e[t].includes(r)));break}case"in":{const r=new Set(n);e=e.filter((e=>r.has(e[t])));break}case"nin":{const r=new Set(n);e=e.filter((e=>!r.has(e[t])));break}case"n":e=e.filter((e=>null==e[t]));break;case"nn":e=e.filter((e=>null!=e[t]));break;case"lt":{const[r]=n;e=e.filter((e=>e[t]<r));break}case"lte":{const[r]=n;e=e.filter((e=>e[t]<=r));break}case"gt":{const[r]=n;e=e.filter((e=>e[t]>r));break}case"gte":{const[r]=n;e=e.filter((e=>e[t]>=r));break}default:throw new Error(`unknown filter type: ${r}`)}}for(const{column:c,direction:d}of r(t.sort)){const t="desc"===d?U:V;e===a&&(e=e.slice()),e.sort(((e,n)=>t(e[c],n[c])))}let{from:s,to:l}=t.slice;s=null==s?0:Math.max(0,s),l=null==l?1/0:Math.max(0,l),(s>0||l<1/0)&&(e=e.slice(Math.max(0,s),Math.max(0,l)));let u=o.slice();if(t.select.columns){if(o){const e=new Map(o.map((e=>[e.name,e])));o=t.select.columns.map((t=>e.get(t)))}e=e.map((e=>Object.fromEntries(t.select.columns.map((t=>[t,e[t]])))))}if(t.names){const n=new Map(t.names.map((e=>[e.column,e])));o&&(o=o.map((e=>{const t=n.get(e.name);return{...e,...t?{name:t.name}:null}}))),u&&(u=u.map((e=>{const t=n.get(e.name);return{...e,...t?{name:t.name}:null}}))),e=ie(e,t)}return e!==a&&o&&(e.schema=o),e.fullSchema=u,e.errors=n,e}function se(e,t,n){const r={};for(const a of n){const n=t.get(a.name),i=e[a.name];r[a.name]="raw"===n?i:ne(i,n)}return r}function le(){return{boolean:0,integer:0,number:0,date:0,string:0,array:0,object:0,bigint:0,buffer:0,defined:0}}const ue=["boolean","integer","number","date","bigint","array","object","buffer"];function ce(e){const t=new Set;for(const n of e)if(n)for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.add(e);return Array.from(t)}function de(e,t=ce(e)){const n=[],r=100,a=e.slice(0,r),o={};for(const s of t){const e=o[s]=le();for(const n of a){let t=n[s];if(null==t)continue;const r=typeof t;if("string"!==r)++e.defined,Array.isArray(t)?++e.array:t instanceof Date?++e.date:t instanceof ArrayBuffer?++e.buffer:"number"===r?(++e.number,Number.isInteger(t)&&++e.integer):r in e&&++e[r];else{if(t=t.trim(),!t)continue;++e.defined,++e.string,/^(true|false)$/i.test(t)?++e.boolean:t&&!isNaN(t)?(++e.number,Number.isInteger(+t)&&++e.integer):te.test(t)&&++e.date}}const t=Math.max(1,.9*e.defined),r=i(ue,(n=>e[n]>=t?e[n]:NaN))??(e.string>=t?"string":"other");n.push({name:s,type:r,inferred:r})}return n}},505:function(e,t,n){"use strict";function r(e,t){return function(n){var r,a,i,o,s,l,u,c,d=n[0],f=[],p=null,m=-1;for(s=1,l=arguments.length;s<l;++s){if(r=arguments[s],r instanceof Node)f[++m]=r,d+="\x3c!--o:"+m+"--\x3e";else if(Array.isArray(r)){for(u=0,c=r.length;u<c;++u)a=r[u],a instanceof Node?(null===p&&(f[++m]=p=document.createDocumentFragment(),d+="\x3c!--o:"+m+"--\x3e"),p.appendChild(a)):(p=null,d+=a);p=null}else d+=r;d+=n[s]}if(p=e(d),++m>0){i=new Array(m),o=document.createTreeWalker(p,NodeFilter.SHOW_COMMENT,null,!1);while(o.nextNode())a=o.currentNode,/^o:/.test(a.nodeValue)&&(i[+a.nodeValue.slice(2)]=a);for(s=0;s<m;++s)(a=i[s])&&a.parentNode.replaceChild(f[s],a)}return 1===p.childNodes.length?p.removeChild(p.firstChild):11===p.nodeType?((a=t()).appendChild(p),a):p}}n.r(t),n.d(t,{template:function(){return r}})},4753:function(e,t,n){"use strict";n.r(t),n.d(t,{tex:function(){return o}});var r=n(1114),a=String.raw;function i(e){return new Promise((function(t,n){var r=document.createElement("link");r.rel="stylesheet",r.href=e,r.onerror=n,r.onload=t,document.head.appendChild(r)}))}function o(e){return Promise.all([e(r.katex.resolve()),e.resolve(r.katex.resolve("dist/katex.min.css")).then(i)]).then((function(e){var t=e[0],n=r();function r(e){return function(){var n=document.createElement("div");return t.render(a.apply(String,arguments),n,e),n.removeChild(n.firstChild)}}return n.options=r,n.block=r({displayMode:!0}),n}))}},7374:function(e,t,n){"use strict";function r(){return this}n.r(t),n.d(t,{that:function(){return r}})},3886:function(e,t,n){"use strict";n.r(t),n.d(t,{vl:function(){return a}});var r=n(1114);async function a(e){const[t,n,a]=await Promise.all([r.vega,r.vegalite,r.vegaliteApi].map((t=>e(t.resolve()))));return a.register(t,n)}},8575:function(e,t,n){"use strict";n.r(t),n.d(t,{width:function(){return a}});var r=n(5086);function a(){return(0,r.observe)((function(e){var t=e(document.body.clientWidth);function n(){var n=document.body.clientWidth;n!==t&&e(t=n)}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}))}},7816:function(e,t,n){"use strict";n.r(t),n.d(t,{Workbook:function(){return r}});n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);class r{constructor(e){Object.defineProperties(this,{_:{value:e},sheetNames:{value:e.worksheets.map((e=>e.name)),enumerable:!0}})}sheet(e,t){const n="number"===typeof e?this.sheetNames[e]:this.sheetNames.includes(e+="")?e:null;if(null==n)throw new Error(`Sheet not found: ${e}`);const r=this._.getWorksheet(n);return a(r,t)}}function a(e,{range:t,headers:n}={}){let[[r,a],[o,u]]=s(t,e);const c=n?e._rows[a++]:null;let d=new Set(["#"]);for(let s=r;s<=o;s++){const e=c?i(c.findCell(s+1)):null;let t=e&&e+""||l(s);while(d.has(t))t+="_";d.add(t)}d=new Array(r).concat(Array.from(d));const f=new Array(u-a+1);for(let s=a;s<=u;s++){const t=f[s-a]=Object.create(null,{"#":{value:s+1}}),n=e.getRow(s+1);if(n.hasValues)for(let e=r;e<=o;e++){const r=i(n.findCell(e+1));null!=r&&(t[d[e+1]]=r)}}return f.columns=d.filter((()=>!0)),f}function i(e){if(!e)return;const{value:t}=e;if(t&&"object"===typeof t&&!(t instanceof Date)){if(t.formula||t.sharedFormula)return t.result&&t.result.error?NaN:t.result;if(t.richText)return o(t);if(t.text){let{text:e}=t;return e.richText&&(e=o(e)),t.hyperlink&&t.hyperlink!==e?`${t.hyperlink} ${e}`:e}return t}return t}function o(e){return e.richText.map((e=>e.text)).join("")}function s(e=":",{columnCount:t,rowCount:n}){if(e+="",!e.match(/^[A-Z]*\d*:[A-Z]*\d*$/))throw new Error("Malformed range specifier");const[[r=0,a=0],[i=t-1,o=n-1]]=e.split(":").map(u);return[[r,a],[i,o]]}function l(e){let t="";e++;do{t=String.fromCharCode(64+(e%26||26))+t}while(e=Math.floor((e-1)/26));return t}function u(e){const[,t,n]=e.match(/^([A-Z]*)(\d*)$/);let r=0;if(t)for(let a=0;a<t.length;a++)r+=Math.pow(26,t.length-a-1)*(t.charCodeAt(a)-64);return[r?r-1:void 0,n?+n-1:void 0]}},1926:function(e,t,n){"use strict";n.d(t,{Ky:function(){return h},Yp:function(){return m},dx:function(){return p}});n(4114),n(4603),n(7566),n(8721);const r=new Map,a=[],i=a.map,o=a.some,s=a.hasOwnProperty,l=/^((?:@[^/@]+\/)?[^/@]+)(?:@([^/]+))?(?:\/(.*))?$/,u=/^\d+\.\d+\.\d+(-[\w-.+]+)?$/,c=/(?:\.[^/]*|\/)$/;class d extends Error{constructor(e){super(e)}}function f(e){const t=l.exec(e);return t&&{name:t[1],version:t[2],path:t[3]}}function p(e="https://cdn.jsdelivr.net/npm/",t=["unpkg","jsdelivr","browser","main"]){if(!/\/$/.test(e))throw new Error("origin lacks trailing slash");function n(e){for(const n of t){let t=e[n];if("string"===typeof t)return t.startsWith("./")&&(t=t.slice(2)),c.test(t)?t:`${t}.js`}}function a(t){const n=`${e}${t.name}${t.version?`@${t.version}`:""}/package.json`;let a=r.get(n);return a||r.set(n,a=fetch(n).then((e=>{if(!e.ok)throw new d("unable to load package.json");return e.redirected&&!r.has(e.url)&&r.set(e.url,a),e.json()}))),a}return async function(t,r){if(t.startsWith(e)&&(t=t.substring(e.length)),/^(\w+:)|\/\//i.test(t))return t;if(/^[.]{0,2}\//i.test(t))return new URL(t,null==r?location:r).href;if(!t.length||/^[\s._]/.test(t)||/\s$/.test(t))throw new d("illegal name");const i=f(t);if(!i)return`${e}${t}`;if(!i.version&&null!=r&&r.startsWith(e)){const t=await a(f(r.substring(e.length)));i.version=t.dependencies&&t.dependencies[i.name]||t.peerDependencies&&t.peerDependencies[i.name]}if(i.path&&!c.test(i.path)&&(i.path+=".js"),i.path&&i.version&&u.test(i.version))return`${e}${i.name}@${i.version}/${i.path}`;const o=await a(i);return`${e}${o.name}@${o.version}/${i.path||n(o)||"index.js"}`}}d.prototype.name=d.name;var m=h(p());function h(e){const t=new Map,n=o(null);function r(e){if("string"!==typeof e)return e;let n=t.get(e);return n||t.set(e,n=new Promise(((t,n)=>{const r=document.createElement("script");r.onload=()=>{try{t(a.pop()(o(e)))}catch(i){n(new d("invalid module"))}r.remove()},r.onerror=()=>{n(new d("unable to load module")),r.remove()},r.async=!0,r.src=e,window.define=w,document.head.appendChild(r)}))),n}function o(t){return n=>Promise.resolve(e(n,t)).then(r)}function s(t){return h(((n,r)=>n in t&&(n=t[n],r=null,"string"!==typeof n)?n:e(n,r)))}function l(e){return arguments.length>1?Promise.all(i.call(arguments,n)).then(b):n(e)}return l.alias=s,l.resolve=e,l}function b(e){const t={};for(const n of e)for(const e in n)s.call(n,e)&&(null==n[e]?Object.defineProperty(t,e,{get:v(n,e)}):t[e]=n[e]);return t}function v(e,t){return()=>e[t]}function g(e){return e+="","exports"===e||"module"===e}function w(e,t,n){const r=arguments.length;r<2?(n=e,t=[]):r<3&&(n=t,t="string"===typeof e?[]:e),a.push(o.call(t,g)?e=>{const r={},a={exports:r};return Promise.all(i.call(t,(t=>(t+="","exports"===t?r:"module"===t?a:e(t))))).then((e=>(n.apply(null,e),a.exports)))}:e=>Promise.all(i.call(t,e)).then((e=>"function"===typeof n?n.apply(null,e):n)))}w.amd={}}}]);
//# sourceMappingURL=441.964645a0.js.map